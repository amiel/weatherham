(function(f){function G(j){if(f.facebox.settings.inited)return true;else f.facebox.settings.inited=true;f(document).trigger("init.facebox");p();var y=f.facebox.settings.imageTypes.join("|");f.facebox.settings.imageTypesRegexp=new RegExp(".("+y+")(\\?\\d+)?$","i");j&&f.extend(f.facebox.settings,j);f("body").append(f.facebox.settings.faceboxHtml);var J=[];f("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){J.push(new Image);J.slice(-1).src=f(this).css("background-image").replace(/url\((.+)\)/,
"$1")});f("#facebox .close").click(f.facebox.close)}function z(j){return j=f(j).data("title")?f(j).data("title"):j.title?j.title:j.alt}function m(){var j,y;if(self.pageYOffset){y=self.pageYOffset;j=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){y=document.documentElement.scrollTop;j=document.documentElement.scrollLeft}else if(document.body){y=document.body.scrollTop;j=document.body.scrollLeft}return new Array(j,y)}function F(){var j;if(self.innerHeight)j=self.innerHeight;
else if(document.documentElement&&document.documentElement.clientHeight)j=document.documentElement.clientHeight;else if(document.body)j=document.body.clientHeight;return j}function p(){var j=f.facebox.settings;j.imageTypes=j.image_types||j.imageTypes;j.faceboxHtml=j.facebox_html||j.faceboxHtml}function E(j,y,J){if(j.match(/#/)){var O=window.location.href.split("#")[0];j=j.replace(O,"");f.facebox.reveal(f(j).children(),y,J);f(j).append('<div id="facebox_moved" />')}else j.match(f.facebox.settings.imageTypesRegexp)?
H(j,y,J):B(j,y,J)}function H(j,y,J){var O=new Image;O.onload=function(){f.facebox.reveal('<div class="facebox_image"><img src="'+O.src+'" /></div>',y,J)};O.src=j}function B(j,y,J){f.get(j,function(O){f.facebox.reveal(O,y,J)})}function q(){return f.facebox.settings.overlay==false||f.facebox.settings.opacity===null}function I(){if(!q()){f("#facebox_overlay").length==0&&f("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');f("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",
f.facebox.settings.opacity).click(function(){f.facebox.close()}).fadeIn(200);return false}}function L(){if(!q()){f("#facebox_overlay").fadeOut(200,function(){f("#facebox_overlay").removeClass("facebox_overlayBG");f("#facebox_overlay").addClass("facebox_hide");f("#facebox_overlay").remove()});return false}}f.facebox=function(j,y,J){f.facebox.loading();if(j.ajax)B(j.ajax,y,J);else if(j.image)H(j.image,y,J);else if(j.div)E(j.div,y,J);else f.isFunction(j)?j.call(f):f.facebox.reveal(j,y,J)};f.extend(f.facebox,
{settings:{opacity:0.5,overlay:true,imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody>             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             </tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="title"> \t\t\t\t  <h2></h2>                   <a href="#" class="close">close</a>                 </div>                 <div class="content">                 </div>               </td>               <td class="b"/>             </tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             </tr>           </tbody>         </table>       </div>     </div>'},
loading:function(){G();if(f("#facebox .loading").length==1)return true;I();f("#facebox .content").empty();f("#facebox .body").children().hide().end().append('<div class="loading"></div>');f("#facebox").css({top:m()[1]+F()/10,left:f(window).width()/2-360}).show().css({left:f(window).width()/2-f("#facebox table").width()/2});f(document).bind("keydown.facebox",function(j){j.keyCode==27&&f.facebox.close();return true});f(document).trigger("loading.facebox")},reveal:function(j,y,J){f(document).trigger("beforeReveal.facebox");
J&&f("#facebox .content").addClass(J);y?f("#facebox .title h2").text(y):f("#facebox .title h2").empty();f("#facebox .content").append(j);f("#facebox .loading").remove();f("#facebox .body").children().fadeIn("normal");f("#facebox").css("left",f(window).width()/2-f("#facebox table").width()/2);f(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){result=f(document).triggerHandler("beforeClose.facebox");result!=false&&f(document).trigger("close.facebox");return false}});
f.fn.facebox=function(j){function y(){f.facebox.loading(true);var J=this.rel.match(/facebox\[?\.(\w+)\]?/);if(J)J=J[1];var O=z(this);E(this.href,O,J);return false}G(j);this.each(function(){this.title&&f(this).data("title",this.title)});return this.bind("click.facebox",y)};f(document).bind("close.facebox",function(){f(document).unbind("keydown.facebox");f("#facebox").fadeOut(function(){f(document).trigger("afterClose.facebox");f("#facebox_moved").length==0?f("#facebox .content").removeClass().addClass("content"):
f("#facebox_moved").after(f("#facebox .content").children()).remove();L();f("#facebox .loading").remove()})})})(jQuery);var Base={};Base.register_variable=function(f,G,z){if(z){if(typeof Base[z]==="undefined")Base[z]={};Base[z][f]=G}else Base[f]=G};Base.reg=Base.register_variable;$(window).ajaxComplete(function(f,G){if(f=G.getResponseHeader("X-JSON-FLASH")){f=window.eval("("+f+")");$.each(f,function(z,m){Base.flash(m,z)})}});
Base.console=function(f){Base.DEBUG&&window.console&&window.console[f]&&window.console[f].apply(null,Array.prototype.slice.apply(arguments,[1]))};(function(f){for(i in f)(function(G){Base[G]=function(){Base.DEBUG&&Base.console.apply(null,[G,"Base","["+(new Date).toLocaleTimeString()+"]"].concat(Array.prototype.slice.apply(arguments)))}})(f[i])})(["log","debug","info","warn","error"]);
(function(f){for(i in f)(function(G){Base.console[G]=function(){Base.DEBUG&&Base.console.apply(null,[G].concat(Array.prototype.slice.apply(arguments)))}})(f[i])})(["log","debug","info","warn","error","assert","dir","dirxml","trace","group","groupEnd","time","timeEnd","profile","profileEnd","count"]);$(window).bind("ajaxStart ajaxSend ajaxComplete ajaxSuccess",Base.debug);String.prototype.capitalize=function(){return this[0].toUpperCase()+this.substr(1,this.length-1)};
String.prototype.titleize=function(){res=[];var f=this.split(/_| /);$.each(f,function(G,z){res.push(z.capitalize())});return res.join(" ")};
var dateFormat=function(){var f=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloSZ]|"[^"]*"|'[^']*'/g,G=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,z=/[^-+\dA-Z]/g,m=function(F,p){F=String(F);for(p=p||2;F.length<p;)F="0"+F;return F};return function(F,p,E){var H=dateFormat;if(arguments.length==1&&Object.prototype.toString.call(F)=="[object String]"&&!/\d/.test(F)){p=F;F=undefined}F=F?new Date(F):new Date;if(isNaN(F))throw SyntaxError("invalid date");
p=String(H.masks[p]||p||H.masks["default"]);if(p.slice(0,4)=="UTC:"){p=p.slice(4);E=true}var B=E?"getUTC":"get",q=F[B+"Date"](),I=F[B+"Day"](),L=F[B+"Month"](),j=F[B+"FullYear"](),y=F[B+"Hours"](),J=F[B+"Minutes"](),O=F[B+"Seconds"]();B=F[B+"Milliseconds"]();var R=E?0:F.getTimezoneOffset(),T={d:q,dd:m(q),ddd:H.i18n.dayNames[I],dddd:H.i18n.dayNames[I+7],m:L+1,mm:m(L+1),mmm:H.i18n.monthNames[L],mmmm:H.i18n.monthNames[L+12],yy:String(j).slice(2),yyyy:j,h:y%12||12,hh:m(y%12||12),H:y,HH:m(y),M:J,MM:m(J),
s:O,ss:m(O),l:m(B,3),L:m(B>99?Math.round(B/10):B),t:y<12?"a":"p",tt:y<12?"am":"pm",T:y<12?"A":"P",TT:y<12?"AM":"PM",Z:E?"UTC":(String(F).match(G)||[""]).pop().replace(z,""),o:(R>0?"-":"+")+m(Math.floor(Math.abs(R)/60)*100+Math.abs(R)%60,4),S:["th","st","nd","rd"][q%10>3?0:(q%100-q%10!=10)*q%10]};return p.replace(f,function(V){return V in T?T[V]:V.slice(1,V.length-1)})}}();
dateFormat.masks={"default":"ddd mmm dd yyyy HH:MM:ss",shortDate:"m/d/yy",mediumDate:"mmm d, yyyy",longDate:"mmmm d, yyyy",fullDate:"dddd, mmmm d, yyyy",shortTime:"h:MM TT",mediumTime:"h:MM:ss TT",longTime:"h:MM:ss TT Z",isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoUtcDateTime:"UTC:yyyy-mm-dd'T'HH:MM:ss'Z'"};
dateFormat.i18n={dayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec","January","February","March","April","May","June","July","August","September","October","November","December"]};Date.prototype.format=function(f,G){return dateFormat(this,f,G)};
(function(){jQuery.color={};jQuery.color.make=function(G,z,m,F){var p={};p.r=G||0;p.g=z||0;p.b=m||0;p.a=F!=null?F:1;p.add=function(E,H){for(var B=0;B<E.length;++B)p[E.charAt(B)]+=H;return p.normalize()};p.scale=function(E,H){for(var B=0;B<E.length;++B)p[E.charAt(B)]*=H;return p.normalize()};p.toString=function(){return p.a>=1?"rgb("+[p.r,p.g,p.b].join(",")+")":"rgba("+[p.r,p.g,p.b,p.a].join(",")+")"};p.normalize=function(){function E(H,B,q){return B<H?H:B>q?q:B}p.r=E(0,parseInt(p.r),255);p.g=E(0,
parseInt(p.g),255);p.b=E(0,parseInt(p.b),255);p.a=E(0,p.a,1);return p};p.clone=function(){return jQuery.color.make(p.r,p.b,p.g,p.a)};return p.normalize()};jQuery.color.extract=function(G,z){var m;do{m=G.css(z).toLowerCase();if(m!=""&&m!="transparent")break;G=G.parent()}while(!jQuery.nodeName(G.get(0),"body"));if(m=="rgba(0, 0, 0, 0)")m="transparent";return jQuery.color.parse(m)};jQuery.color.parse=function(G){var z,m=jQuery.color.make;if(z=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(G))return m(parseInt(z[1],
10),parseInt(z[2],10),parseInt(z[3],10));if(z=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(G))return m(parseInt(z[1],10),parseInt(z[2],10),parseInt(z[3],10),parseFloat(z[4]));if(z=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(G))return m(parseFloat(z[1])*2.55,parseFloat(z[2])*2.55,parseFloat(z[3])*2.55);if(z=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(G))return m(parseFloat(z[1])*
2.55,parseFloat(z[2])*2.55,parseFloat(z[3])*2.55,parseFloat(z[4]));if(z=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(G))return m(parseInt(z[1],16),parseInt(z[2],16),parseInt(z[3],16));if(z=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(G))return m(parseInt(z[1]+z[1],16),parseInt(z[2]+z[2],16),parseInt(z[3]+z[3],16));G=jQuery.trim(G).toLowerCase();if(G=="transparent")return m(255,255,255,0);else{z=f[G];return m(z[0],z[1],z[2])}};var f={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,
220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],
lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();
(function(f){function G(m,F,p,E){function H(a,d){d=[U].concat(d);for(var e=0;e<a.length;++e)a[e].apply(this,d)}function B(){for(var a=0;a<E.length;++a){var d=E[a];d.init(U);d.options&&f.extend(true,v,d.options)}}function q(a){f.extend(true,v,a);if(v.grid.borderColor==null)v.grid.borderColor=v.grid.color;if(v.xaxis.noTicks&&v.xaxis.ticks==null)v.xaxis.ticks=v.xaxis.noTicks;if(v.yaxis.noTicks&&v.yaxis.ticks==null)v.yaxis.ticks=v.yaxis.noTicks;if(v.grid.coloredAreas)v.grid.markings=v.grid.coloredAreas;
if(v.grid.coloredAreasColor)v.grid.markingsColor=v.grid.coloredAreasColor;v.lines&&f.extend(true,v.series.lines,v.lines);v.points&&f.extend(true,v.series.points,v.points);v.bars&&f.extend(true,v.series.bars,v.bars);if(v.shadowSize)v.series.shadowSize=v.shadowSize;for(var d in da)if(v.hooks[d]&&v.hooks[d].length)da[d]=da[d].concat(v.hooks[d]);H(da.processOptions,[v])}function I(a){P=L(a);y();J()}function L(a){for(var d=[],e=0;e<a.length;++e){var c=f.extend(true,{},v.series);if(a[e].data){c.data=a[e].data;
delete a[e].data;f.extend(true,c,a[e]);a[e].data=c.data}else c.data=a[e];d.push(c)}return d}function j(a,d){a=a[d];if(!a||a==1)return C[d];if(typeof a=="number")return C[d.charAt(0)+a+d.slice(1)];return a}function y(){var a,d=P.length,e=[],c=[];for(a=0;a<P.length;++a){var b=P[a].color;if(b!=null){--d;typeof b=="number"?c.push(b):e.push(f.color.parse(P[a].color))}}for(a=0;a<c.length;++a)d=Math.max(d,c[a]+1);e=[];for(a=c=0;e.length<d;){b=v.colors.length==a?f.color.make(100,100,100):f.color.parse(v.colors[a]);
var g=c%2==1?-1:1;b.scale("rgb",1+g*Math.ceil(c/2)*0.2);e.push(b);++a;if(a>=v.colors.length){a=0;++c}}for(a=d=0;a<P.length;++a){c=P[a];if(c.color==null){c.color=e[d].toString();++d}else if(typeof c.color=="number")c.color=e[c.color].toString();if(c.lines.show==null){var k;b=true;for(k in c)if(c[k].show){b=false;break}if(b)c.lines.show=true}c.xaxis=j(c,"xaxis");c.yaxis=j(c,"yaxis")}}function J(){function a(A,M,ga){if(M<A.datamin)A.datamin=M;if(ga>A.datamax)A.datamax=ga}var d=Number.POSITIVE_INFINITY,
e=Number.NEGATIVE_INFINITY,c,b,g,k,h,l,n,r,o,D,x;for(r in C){C[r].datamin=d;C[r].datamax=e;C[r].used=false}for(c=0;c<P.length;++c){h=P[c];h.datapoints={points:[]};H(da.processRawData,[h,h.data,h.datapoints])}for(c=0;c<P.length;++c){h=P[c];var w=h.data,t=h.datapoints.format;if(!t){t=[];t.push({x:true,number:true,required:true});t.push({y:true,number:true,required:true});h.bars.show&&t.push({y:true,number:true,required:false,defaultValue:0});h.datapoints.format=t}if(h.datapoints.pointsize==null){if(h.datapoints.pointsize==
null)h.datapoints.pointsize=t.length;n=h.datapoints.pointsize;l=h.datapoints.points;insertSteps=h.lines.show&&h.lines.steps;h.xaxis.used=h.yaxis.used=true;for(b=g=0;b<w.length;++b,g+=n){x=w[b];var u=x==null;if(!u)for(k=0;k<n;++k){o=x[k];if(D=t[k]){if(D.number&&o!=null){o=+o;if(isNaN(o))o=null}if(o==null){if(D.required)u=true;if(D.defaultValue!=null)o=D.defaultValue}}l[g+k]=o}if(u)for(k=0;k<n;++k){o=l[g+k];if(o!=null){D=t[k];D.x&&a(h.xaxis,o,o);D.y&&a(h.yaxis,o,o)}l[g+k]=null}else if(insertSteps&&
g>0&&l[g-n]!=null&&l[g-n]!=l[g]&&l[g-n+1]!=l[g+1]){for(k=0;k<n;++k)l[g+n+k]=l[g+k];l[g+1]=l[g-n+1];g+=n}}}}for(c=0;c<P.length;++c){h=P[c];H(da.processDatapoints,[h,h.datapoints])}for(c=0;c<P.length;++c){h=P[c];l=h.datapoints.points;n=h.datapoints.pointsize;x=g=d;u=w=e;for(b=0;b<l.length;b+=n)if(l[b]!=null)for(k=0;k<n;++k){o=l[b+k];if(D=t[k]){if(D.x){if(o<g)g=o;if(o>w)w=o}if(D.y){if(o<x)x=o;if(o>u)u=o}}}if(h.bars.show){b=h.bars.align=="left"?0:-h.bars.barWidth/2;if(h.bars.horizontal){x+=b;u+=b+h.bars.barWidth}else{g+=
b;w+=b+h.bars.barWidth}}a(h.xaxis,g,w);a(h.yaxis,x,u)}for(r in C){if(C[r].datamin==d)C[r].datamin=null;if(C[r].datamax==e)C[r].datamax=null}}function O(){function a(d,e){var c=document.createElement("canvas");c.width=d;c.height=e;if(f.browser.msie)c=window.G_vmlCanvasManager.initElement(c);return c}Z=m.width();ea=m.height();m.html("");m.css("position")=="static"&&m.css("position","relative");if(Z<=0||ea<=0)throw"Invalid dimensions for plot, width = "+Z+", height = "+ea;f.browser.msie&&window.G_vmlCanvasManager.init_(document);
pa=f(a(Z,ea)).appendTo(m).get(0);s=pa.getContext("2d");sa=f(a(Z,ea)).css({position:"absolute",left:0,top:0}).appendTo(m).get(0);Y=sa.getContext("2d");Y.stroke()}function R(){ka=f([sa,pa]);v.grid.hoverable&&ka.mousemove(ha);v.grid.clickable&&ka.click(Aa);H(da.bindEvents,[ka])}function T(){function a(b,g){function k(o){return o}var h,l,n=g.transform||k,r=g.inverseTransform;if(b==C.xaxis||b==C.x2axis){h=b.scale=aa/(n(b.max)-n(b.min));l=n(b.min);b.p2c=n==k?function(o){return(o-l)*h}:function(o){return(n(o)-
l)*h};b.c2p=r?function(o){return r(l+o/h)}:function(o){return l+o/h}}else{h=b.scale=ba/(n(b.max)-n(b.min));l=n(b.max);b.p2c=n==k?function(o){return(l-o)*h}:function(o){return(l-n(o))*h};b.c2p=r?function(o){return r(l-o/h)}:function(o){return l-o/h}}}function d(b,g){var k=[],h;b.labelWidth=g.labelWidth;b.labelHeight=g.labelHeight;if(b==C.xaxis||b==C.x2axis){if(b.labelWidth==null)b.labelWidth=Z/(b.ticks.length>0?b.ticks.length:1);if(b.labelHeight==null){k=[];for(g=0;g<b.ticks.length;++g)(h=b.ticks[g].label)&&
k.push('<div class="tickLabel" style="float:left;width:'+b.labelWidth+'px">'+h+"</div>");if(k.length>0){k=f('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+k.join("")+'<div style="clear:left"></div></div>').appendTo(m);b.labelHeight=k.height();k.remove()}}}else if(b.labelWidth==null||b.labelHeight==null){for(g=0;g<b.ticks.length;++g)(h=b.ticks[g].label)&&k.push('<div class="tickLabel">'+h+"</div>");if(k.length>0){k=f('<div style="position:absolute;top:-10000px;font-size:smaller">'+
k.join("")+"</div>").appendTo(m);if(b.labelWidth==null)b.labelWidth=k.width();if(b.labelHeight==null)b.labelHeight=k.find("div").height();k.remove()}}if(b.labelWidth==null)b.labelWidth=0;if(b.labelHeight==null)b.labelHeight=0}function e(){var b=v.grid.borderWidth;for(i=0;i<P.length;++i)b=Math.max(b,2*(P[i].points.radius+P[i].points.lineWidth/2));K.left=K.right=K.top=K.bottom=b;var g=v.grid.labelMargin+v.grid.borderWidth;if(C.xaxis.labelHeight>0)K.bottom=Math.max(b,C.xaxis.labelHeight+g);if(C.yaxis.labelWidth>
0)K.left=Math.max(b,C.yaxis.labelWidth+g);if(C.x2axis.labelHeight>0)K.top=Math.max(b,C.x2axis.labelHeight+g);if(C.y2axis.labelWidth>0)K.right=Math.max(b,C.y2axis.labelWidth+g);aa=Z-K.left-K.right;ba=ea-K.bottom-K.top}var c;for(c in C)V(C[c],v[c]);if(v.grid.show){for(c in C){W(C[c],v[c]);ca(C[c],v[c]);d(C[c],v[c])}e()}else{K.left=K.right=K.top=K.bottom=0;aa=Z;ba=ea}for(c in C)a(C[c],v[c]);v.grid.show&&ja();X()}function V(a,d){var e=+(d.min!=null?d.min:a.datamin),c=+(d.max!=null?d.max:a.datamax),b=
c-e;if(b==0){b=c==0?1:0.01;if(d.min==null)e-=b;if(d.max==null||d.min!=null)c+=b}else{var g=d.autoscaleMargin;if(g!=null){if(d.min==null){e-=b*g;if(e<0&&a.datamin!=null&&a.datamin>=0)e=0}if(d.max==null){c+=b*g;if(c>0&&a.datamax!=null&&a.datamax<=0)c=0}}}a.min=e;a.max=c}function W(a,d){var e;e=typeof d.ticks=="number"&&d.ticks>0?d.ticks:a==C.xaxis||a==C.x2axis?0.3*Math.sqrt(Z):0.3*Math.sqrt(ea);var c=(a.max-a.min)/e,b,g;if(d.mode=="time"){var k={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,
year:525949.2*60*1E3};g=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];e=0;if(d.minTickSize!=null)e=typeof d.tickSize=="number"?d.tickSize:d.minTickSize[0]*k[d.minTickSize[1]];for(b=0;b<g.length-1;++b)if(c<(g[b][0]*k[g[b][1]]+g[b+1][0]*k[g[b+
1][1]])/2&&g[b][0]*k[g[b][1]]>=e)break;e=g[b][0];b=g[b][1];if(b=="year"){g=Math.pow(10,Math.floor(Math.log(c/k.year)/Math.LN10));c=c/k.year/g;e=c<1.5?1:c<3?2:c<7.5?5:10;e*=g}if(d.tickSize){e=d.tickSize[0];b=d.tickSize[1]}c=function(n){var r=[],o=n.tickSize[0],D=n.tickSize[1],x=new Date(n.min),w=o*k[D];D=="second"&&x.setUTCSeconds(z(x.getUTCSeconds(),o));D=="minute"&&x.setUTCMinutes(z(x.getUTCMinutes(),o));D=="hour"&&x.setUTCHours(z(x.getUTCHours(),o));D=="month"&&x.setUTCMonth(z(x.getUTCMonth(),o));
D=="year"&&x.setUTCFullYear(z(x.getUTCFullYear(),o));x.setUTCMilliseconds(0);w>=k.minute&&x.setUTCSeconds(0);w>=k.hour&&x.setUTCMinutes(0);w>=k.day&&x.setUTCHours(0);w>=k.day*4&&x.setUTCDate(1);w>=k.year&&x.setUTCMonth(0);var t=0,u=Number.NaN,A;do{A=u;u=x.getTime();r.push({v:u,label:n.tickFormatter(u,n)});if(D=="month")if(o<1){x.setUTCDate(1);var M=x.getTime();x.setUTCMonth(x.getUTCMonth()+1);var ga=x.getTime();x.setTime(u+t*k.hour+(ga-M)*o);t=x.getUTCHours();x.setUTCHours(0)}else x.setUTCMonth(x.getUTCMonth()+
o);else D=="year"?x.setUTCFullYear(x.getUTCFullYear()+o):x.setTime(u+w)}while(u<n.max&&u!=A);return r};g=function(n,r){n=new Date(n);if(d.timeformat!=null)return f.plot.formatDate(n,d.timeformat,d.monthNames);var o=r.tickSize[0]*k[r.tickSize[1]];r=r.max-r.min;var D=d.twelveHourClock?" %p":"";fmt=o<k.minute?"%h:%M:%S"+D:o<k.day?r<2*k.day?"%h:%M"+D:"%b %d %h:%M"+D:o<k.month?"%b %d":o<k.year?r<k.year?"%b":"%b %y":"%y";return f.plot.formatDate(n,fmt,d.monthNames)}}else{var h=d.tickDecimals,l=-Math.floor(Math.log(c)/
Math.LN10);if(h!=null&&l>h)l=h;g=Math.pow(10,-l);c=c/g;if(c<1.5)e=1;else if(c<3){e=2;if(c>2.25&&(h==null||l+1<=h)){e=2.5;++l}}else e=c<7.5?5:10;e*=g;if(d.minTickSize!=null&&e<d.minTickSize)e=d.minTickSize;if(d.tickSize!=null)e=d.tickSize;a.tickDecimals=Math.max(0,h!=null?h:l);c=function(n){var r=[],o=z(n.min,n.tickSize),D=0,x=Number.NaN,w;do{w=x;x=o+D*n.tickSize;r.push({v:x,label:n.tickFormatter(x,n)});++D}while(x<n.max&&x!=w);return r};g=function(n,r){return n.toFixed(r.tickDecimals)}}a.tickSize=
b?[e,b]:e;a.tickGenerator=c;a.tickFormatter=f.isFunction(d.tickFormatter)?function(n,r){return""+d.tickFormatter(n,r)}:g}function ca(a,d){a.ticks=[];if(a.used){if(d.ticks==null)a.ticks=a.tickGenerator(a);else if(typeof d.ticks=="number"){if(d.ticks>0)a.ticks=a.tickGenerator(a)}else if(d.ticks){var e=d.ticks;if(f.isFunction(e))e=e({min:a.min,max:a.max});var c,b;for(c=0;c<e.length;++c){var g=null,k=e[c];if(typeof k=="object"){b=k[0];if(k.length>1)g=k[1]}else b=k;if(g==null)g=a.tickFormatter(b,a);a.ticks[c]=
{v:b,label:g}}}if(d.autoscaleMargin!=null&&a.ticks.length>0){if(d.min==null)a.min=Math.min(a.min,a.ticks[0].v);if(d.max==null&&a.ticks.length>1)a.max=Math.max(a.max,a.ticks[a.ticks.length-1].v)}}}function ma(){s.clearRect(0,0,Z,ea);var a=v.grid;a.show&&!a.aboveData&&na();for(var d=0;d<P.length;++d)ta(P[d]);H(da.draw,[s]);a.show&&a.aboveData&&na()}function qa(a,d){var e=d+"axis",c=d+"2axis",b,g;if(a[e]){b=C[e];g=a[e].from;a=a[e].to}else if(a[c]){b=C[c];g=a[c].from;a=a[c].to}else{b=C[e];g=a[d+"1"];
a=a[d+"2"]}if(g!=null&&a!=null&&g>a)return{from:a,to:g,axis:b};return{from:g,to:a,axis:b}}function na(){var a;s.save();s.translate(K.left,K.top);if(v.grid.backgroundColor){s.fillStyle=va(v.grid.backgroundColor,ba,0,"rgba(255, 255, 255, 0)");s.fillRect(0,0,aa,ba)}var d=v.grid.markings;if(d){if(f.isFunction(d))d=d({xmin:C.xaxis.min,xmax:C.xaxis.max,ymin:C.yaxis.min,ymax:C.yaxis.max,xaxis:C.xaxis,yaxis:C.yaxis,x2axis:C.x2axis,y2axis:C.y2axis});for(a=0;a<d.length;++a){var e=d[a],c=qa(e,"x"),b=qa(e,"y");
if(c.from==null)c.from=c.axis.min;if(c.to==null)c.to=c.axis.max;if(b.from==null)b.from=b.axis.min;if(b.to==null)b.to=b.axis.max;if(!(c.to<c.axis.min||c.from>c.axis.max||b.to<b.axis.min||b.from>b.axis.max)){c.from=Math.max(c.from,c.axis.min);c.to=Math.min(c.to,c.axis.max);b.from=Math.max(b.from,b.axis.min);b.to=Math.min(b.to,b.axis.max);if(!(c.from==c.to&&b.from==b.to)){c.from=c.axis.p2c(c.from);c.to=c.axis.p2c(c.to);b.from=b.axis.p2c(b.from);b.to=b.axis.p2c(b.to);if(c.from==c.to||b.from==b.to){s.beginPath();
s.strokeStyle=e.color||v.grid.markingsColor;s.lineWidth=e.lineWidth||v.grid.markingsLineWidth;s.moveTo(c.from,b.from);s.lineTo(c.to,b.to);s.stroke()}else{s.fillStyle=e.color||v.grid.markingsColor;s.fillRect(c.from,b.to,c.to-c.from,b.from-b.to)}}}}}s.lineWidth=1;s.strokeStyle=v.grid.tickColor;s.beginPath();e=C.xaxis;for(a=0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=C.xaxis.max)){s.moveTo(Math.floor(e.p2c(d))+s.lineWidth/2,0);s.lineTo(Math.floor(e.p2c(d))+s.lineWidth/2,ba)}}e=C.yaxis;for(a=
0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=e.max)){s.moveTo(0,Math.floor(e.p2c(d))+s.lineWidth/2);s.lineTo(aa,Math.floor(e.p2c(d))+s.lineWidth/2)}}e=C.x2axis;for(a=0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=e.max)){s.moveTo(Math.floor(e.p2c(d))+s.lineWidth/2,-5);s.lineTo(Math.floor(e.p2c(d))+s.lineWidth/2,5)}}e=C.y2axis;for(a=0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=e.max)){s.moveTo(aa-5,Math.floor(e.p2c(d))+s.lineWidth/2);s.lineTo(aa+5,Math.floor(e.p2c(d))+
s.lineWidth/2)}}s.stroke();if(v.grid.borderWidth){a=v.grid.borderWidth;s.lineWidth=a;s.strokeStyle=v.grid.borderColor;s.strokeRect(-a/2,-a/2,aa+a,ba+a)}s.restore()}function ja(){function a(c,b){for(var g=0;g<c.ticks.length;++g){var k=c.ticks[g];!k.label||k.v<c.min||k.v>c.max||d.push(b(k,c))}}m.find(".tickLabels").remove();var d=['<div class="tickLabels" style="font-size:smaller;color:'+v.grid.color+'">'],e=v.grid.labelMargin+v.grid.borderWidth;a(C.xaxis,function(c,b){return'<div style="position:absolute;top:'+
(K.top+ba+e)+"px;left:"+Math.round(K.left+b.p2c(c.v)-b.labelWidth/2)+"px;width:"+b.labelWidth+'px;text-align:center" class="tickLabel">'+c.label+"</div>"});a(C.yaxis,function(c,b){return'<div style="position:absolute;top:'+Math.round(K.top+b.p2c(c.v)-b.labelHeight/2)+"px;right:"+(K.right+aa+e)+"px;width:"+b.labelWidth+'px;text-align:right" class="tickLabel">'+c.label+"</div>"});a(C.x2axis,function(c,b){return'<div style="position:absolute;bottom:'+(K.bottom+ba+e)+"px;left:"+Math.round(K.left+b.p2c(c.v)-
b.labelWidth/2)+"px;width:"+b.labelWidth+'px;text-align:center" class="tickLabel">'+c.label+"</div>"});a(C.y2axis,function(c,b){return'<div style="position:absolute;top:'+Math.round(K.top+b.p2c(c.v)-b.labelHeight/2)+"px;left:"+(K.left+aa+e)+"px;width:"+b.labelWidth+'px;text-align:left" class="tickLabel">'+c.label+"</div>"});d.push("</div>");m.append(d.join(""))}function ta(a){a.lines.show&&la(a);a.bars.show&&Q(a);a.points.show&&oa(a)}function la(a){function d(k,h,l,n,r){var o=k.points;k=k.pointsize;
var D=null,x=null;s.beginPath();for(var w=k;w<o.length;w+=k){var t=o[w-k],u=o[w-k+1],A=o[w],M=o[w+1];if(!(t==null||A==null)){if(u<=M&&u<r.min){if(M<r.min)continue;t=(r.min-u)/(M-u)*(A-t)+t;u=r.min}else if(M<=u&&M<r.min){if(u<r.min)continue;A=(r.min-u)/(M-u)*(A-t)+t;M=r.min}if(u>=M&&u>r.max){if(M>r.max)continue;t=(r.max-u)/(M-u)*(A-t)+t;u=r.max}else if(M>=u&&M>r.max){if(u>r.max)continue;A=(r.max-u)/(M-u)*(A-t)+t;M=r.max}if(t<=A&&t<n.min){if(A<n.min)continue;u=(n.min-t)/(A-t)*(M-u)+u;t=n.min}else if(A<=
t&&A<n.min){if(t<n.min)continue;M=(n.min-t)/(A-t)*(M-u)+u;A=n.min}if(t>=A&&t>n.max){if(A>n.max)continue;u=(n.max-t)/(A-t)*(M-u)+u;t=n.max}else if(A>=t&&A>n.max){if(t>n.max)continue;M=(n.max-t)/(A-t)*(M-u)+u;A=n.max}if(t!=D||u!=x)s.moveTo(n.p2c(t)+h,r.p2c(u)+l);D=A;x=M;s.lineTo(n.p2c(A)+h,r.p2c(M)+l)}}s.stroke()}function e(k,h,l){var n=k.points;k=k.pointsize;var r=Math.min(Math.max(0,l.min),l.max),o;o=0;for(var D=false,x=k;x<n.length;x+=k){var w=n[x-k],t=n[x-k+1],u=n[x],A=n[x+1];if(D&&w!=null&&u==
null){s.lineTo(h.p2c(o),l.p2c(r));s.fill();D=false}else if(!(w==null||u==null)){if(w<=u&&w<h.min){if(u<h.min)continue;t=(h.min-w)/(u-w)*(A-t)+t;w=h.min}else if(u<=w&&u<h.min){if(w<h.min)continue;A=(h.min-w)/(u-w)*(A-t)+t;u=h.min}if(w>=u&&w>h.max){if(u>h.max)continue;t=(h.max-w)/(u-w)*(A-t)+t;w=h.max}else if(u>=w&&u>h.max){if(w>h.max)continue;A=(h.max-w)/(u-w)*(A-t)+t;u=h.max}if(!D){s.beginPath();s.moveTo(h.p2c(w),l.p2c(r));D=true}if(t>=l.max&&A>=l.max){s.lineTo(h.p2c(w),l.p2c(l.max));s.lineTo(h.p2c(u),
l.p2c(l.max));o=u}else if(t<=l.min&&A<=l.min){s.lineTo(h.p2c(w),l.p2c(l.min));s.lineTo(h.p2c(u),l.p2c(l.min));o=u}else{var M=w,ga=u;if(t<=A&&t<l.min&&A>=l.min){w=(l.min-t)/(A-t)*(u-w)+w;t=l.min}else if(A<=t&&A<l.min&&t>=l.min){u=(l.min-t)/(A-t)*(u-w)+w;A=l.min}if(t>=A&&t>l.max&&A<=l.max){w=(l.max-t)/(A-t)*(u-w)+w;t=l.max}else if(A>=t&&A>l.max&&t<=l.max){u=(l.max-t)/(A-t)*(u-w)+w;A=l.max}if(w!=M){o=t<=l.min?l.min:l.max;s.lineTo(h.p2c(M),l.p2c(o));s.lineTo(h.p2c(w),l.p2c(o))}s.lineTo(h.p2c(w),l.p2c(t));
s.lineTo(h.p2c(u),l.p2c(A));if(u!=ga){o=A<=l.min?l.min:l.max;s.lineTo(h.p2c(u),l.p2c(o));s.lineTo(h.p2c(ga),l.p2c(o))}o=Math.max(u,ga)}}}if(D){s.lineTo(h.p2c(o),l.p2c(r));s.fill()}}s.save();s.translate(K.left,K.top);s.lineJoin="round";var c=a.lines.lineWidth,b=a.shadowSize;if(c>0&&b>0){s.lineWidth=b;s.strokeStyle="rgba(0,0,0,0.1)";var g=Math.PI/18;d(a.datapoints,Math.sin(g)*(c/2+b/2),Math.cos(g)*(c/2+b/2),a.xaxis,a.yaxis);s.lineWidth=b/2;d(a.datapoints,Math.sin(g)*(c/2+b/4),Math.cos(g)*(c/2+b/4),
a.xaxis,a.yaxis)}s.lineWidth=c;s.strokeStyle=a.color;if(b=S(a.lines,a.color,0,ba)){s.fillStyle=b;e(a.datapoints,a.xaxis,a.yaxis)}c>0&&d(a.datapoints,0,0,a.xaxis,a.yaxis);s.restore()}function oa(a){function d(g,k,h,l,n,r,o){var D=g.points;g=g.pointsize;for(var x=0;x<D.length;x+=g){var w=D[x],t=D[x+1];if(!(w==null||w<r.min||w>r.max||t<o.min||t>o.max)){s.beginPath();s.arc(r.p2c(w),o.p2c(t)+l,k,0,n,false);if(h){s.fillStyle=h;s.fill()}s.stroke()}}}s.save();s.translate(K.left,K.top);var e=a.lines.lineWidth,
c=a.shadowSize,b=a.points.radius;if(e>0&&c>0){c=c/2;s.lineWidth=c;s.strokeStyle="rgba(0,0,0,0.1)";d(a.datapoints,b,null,c+c/2,Math.PI,a.xaxis,a.yaxis);s.strokeStyle="rgba(0,0,0,0.2)";d(a.datapoints,b,null,c/2,Math.PI,a.xaxis,a.yaxis)}s.lineWidth=e;s.strokeStyle=a.color;d(a.datapoints,b,S(a.points,a.color),0,2*Math.PI,a.xaxis,a.yaxis);s.restore()}function N(a,d,e,c,b,g,k,h,l,n,r){var o,D,x,w;if(r){w=D=x=true;o=false;r=e;a=a;e=d+c;b=d+b;if(a<r){d=a;a=r;r=d;o=true;D=false}}else{o=D=x=true;w=false;r=
a+c;a=a+b;b=e;e=d;if(e<b){d=e;e=b;b=d;w=true;x=false}}if(!(a<h.min||r>h.max||e<l.min||b>l.max)){if(r<h.min){r=h.min;o=false}if(a>h.max){a=h.max;D=false}if(b<l.min){b=l.min;w=false}if(e>l.max){e=l.max;x=false}r=h.p2c(r);b=l.p2c(b);a=h.p2c(a);e=l.p2c(e);if(k){n.beginPath();n.moveTo(r,b);n.lineTo(r,e);n.lineTo(a,e);n.lineTo(a,b);n.fillStyle=k(b,e);n.fill()}if(o||D||x||w){n.beginPath();n.moveTo(r,b+g);o?n.lineTo(r,e+g):n.moveTo(r,e+g);x?n.lineTo(a,e+g):n.moveTo(a,e+g);D?n.lineTo(a,b+g):n.moveTo(a,b+g);
w?n.lineTo(r,b+g):n.moveTo(r,b+g);n.stroke()}}}function Q(a){function d(b,g,k,h,l,n,r){var o=b.points;b=b.pointsize;for(var D=0;D<o.length;D+=b)o[D]!=null&&N(o[D],o[D+1],o[D+2],g,k,h,l,n,r,s,a.bars.horizontal)}s.save();s.translate(K.left,K.top);s.lineWidth=a.bars.lineWidth;s.strokeStyle=a.color;var e=a.bars.align=="left"?0:-a.bars.barWidth/2,c=a.bars.fill?function(b,g){return S(a.bars,a.color,b,g)}:null;d(a.datapoints,e,e+a.bars.barWidth,0,c,a.xaxis,a.yaxis);s.restore()}function S(a,d,e,c){var b=
a.fill;if(!b)return null;if(a.fillColor)return va(a.fillColor,e,c,d);a=f.color.parse(d);a.a=typeof b=="number"?b:0.4;a.normalize();return a.toString()}function X(){m.find(".legend").remove();if(v.legend.show){var a=[],d=false,e=v.legend.labelFormatter,c,b;for(i=0;i<P.length;++i){c=P[i];if(b=c.label){if(i%v.legend.noColumns==0){d&&a.push("</tr>");a.push("<tr>");d=true}if(e)b=e(b,c);a.push('<td class="legendColorBox"><div style="border:1px solid '+v.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+b+"</td>")}}d&&a.push("</tr>");if(a.length!=0){d='<table style="font-size:smaller;color:'+v.grid.color+'">'+a.join("")+"</table>";if(v.legend.container!=null)f(v.legend.container).html(d);else{a="";e=v.legend.position;c=v.legend.margin;if(c[0]==null)c=[c,c];if(e.charAt(0)=="n")a+="top:"+(c[1]+K.top)+"px;";else if(e.charAt(0)=="s")a+="bottom:"+(c[1]+K.bottom)+"px;";if(e.charAt(1)=="e")a+="right:"+(c[0]+K.right)+"px;";else if(e.charAt(1)==
"w")a+="left:"+(c[0]+K.left)+"px;";d=f('<div class="legend">'+d.replace('style="','style="position:absolute;'+a+";")+"</div>").appendTo(m);if(v.legend.backgroundOpacity!=0){e=v.legend.backgroundColor;if(e==null){e=(e=v.grid.backgroundColor)&&typeof e=="string"?f.color.parse(e):f.color.extract(d,"background-color");e.a=1;e=e.toString()}c=d.children();f('<div style="position:absolute;width:'+c.width()+"px;height:"+c.height()+"px;"+a+"background-color:"+e+';"> </div>').prependTo(d).css("opacity",v.legend.backgroundOpacity)}}}}}
function ia(a,d,e){var c=v.grid.mouseActiveRadius,b=c*c+1,g=null,k,h;for(k=0;k<P.length;++k)if(e(P[k])){var l=P[k],n=l.xaxis,r=l.yaxis,o=l.datapoints.points,D=l.datapoints.pointsize,x=n.c2p(a),w=r.c2p(d),t=c/n.scale,u=c/r.scale;if(l.lines.show||l.points.show)for(h=0;h<o.length;h+=D){var A=o[h],M=o[h+1];if(A!=null)if(!(A-x>t||A-x<-t||M-w>u||M-w<-u)){A=Math.abs(n.p2c(A)-a);M=Math.abs(r.p2c(M)-d);M=A*A+M*M;if(M<=b){b=M;g=[k,h/D]}}}if(l.bars.show&&!g){n=l.bars.align=="left"?0:-l.bars.barWidth/2;l=n+l.bars.barWidth;
for(h=0;h<o.length;h+=D){A=o[h];M=o[h+1];r=o[h+2];if(A!=null)if(P[k].bars.horizontal?x<=Math.max(r,A)&&x>=Math.min(r,A)&&w>=M+n&&w<=M+l:x>=A+n&&x<=A+l&&w>=Math.min(r,M)&&w<=Math.max(r,M))g=[k,h/D]}}}if(g){k=g[0];h=g[1];D=P[k].datapoints.pointsize;return{datapoint:P[k].datapoints.points.slice(h*D,(h+1)*D),dataIndex:h,series:P[k],seriesIndex:k}}return null}function ha(a){v.grid.hoverable&&wa("plothover",a,function(d){return d.hoverable!=false})}function Aa(a){wa("plotclick",a,function(d){return d.clickable!=
false})}function wa(a,d,e){var c=ka.offset(),b={pageX:d.pageX,pageY:d.pageY},g=d.pageX-c.left-K.left;d=d.pageY-c.top-K.top;if(C.xaxis.used)b.x=C.xaxis.c2p(g);if(C.yaxis.used)b.y=C.yaxis.c2p(d);if(C.x2axis.used)b.x2=C.x2axis.c2p(g);if(C.y2axis.used)b.y2=C.y2axis.c2p(d);if(e=ia(g,d,e)){e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+c.left+K.left);e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+c.top+K.top)}if(v.grid.autoHighlight){for(c=0;c<fa.length;++c){g=fa[c];g.auto==a&&!(e&&g.series==
e.series&&g.point==e.datapoint)&&xa(g.series,g.point)}e&&ya(e.series,e.datapoint,a)}m.trigger(a,[b,e])}function ra(){ua||(ua=setTimeout(Ba,30))}function Ba(){ua=null;Y.save();Y.clearRect(0,0,Z,ea);Y.translate(K.left,K.top);var a,d;for(a=0;a<fa.length;++a){d=fa[a];d.series.bars.show?Ca(d.series,d.point):Da(d.series,d.point)}Y.restore();H(da.drawOverlay,[Y])}function ya(a,d,e){if(typeof a=="number")a=P[a];if(typeof d=="number")d=a.data[d];var c=za(a,d);if(c==-1){fa.push({series:a,point:d,auto:e});ra()}else if(!e)fa[c].auto=
false}function xa(a,d){if(a==null&&d==null){fa=[];ra()}if(typeof a=="number")a=P[a];if(typeof d=="number")d=a.data[d];a=za(a,d);if(a!=-1){fa.splice(a,1);ra()}}function za(a,d){for(var e=0;e<fa.length;++e){var c=fa[e];if(c.series==a&&c.point[0]==d[0]&&c.point[1]==d[1])return e}return-1}function Da(a,d){var e=d[0];d=d[1];var c=a.xaxis,b=a.yaxis;if(!(e<c.min||e>c.max||d<b.min||d>b.max)){var g=a.points.radius+a.points.lineWidth/2;Y.lineWidth=g;Y.strokeStyle=f.color.parse(a.color).scale("a",0.5).toString();
a=1.5*g;Y.beginPath();Y.arc(c.p2c(e),b.p2c(d),a,0,2*Math.PI,false);Y.stroke()}}function Ca(a,d){Y.lineWidth=a.bars.lineWidth;Y.strokeStyle=f.color.parse(a.color).scale("a",0.5).toString();var e=f.color.parse(a.color).scale("a",0.5).toString(),c=a.bars.align=="left"?0:-a.bars.barWidth/2;N(d[0],d[1],d[2]||0,c,c+a.bars.barWidth,0,function(){return e},a.xaxis,a.yaxis,Y,a.bars.horizontal)}function va(a,d,e,c){if(typeof a=="string")return a;else{d=s.createLinearGradient(0,e,0,d);e=0;for(var b=a.colors.length;e<
b;++e){var g=a.colors[e];if(typeof g!="string"){g=f.color.parse(c).scale("rgb",g.brightness);g.a*=g.opacity;g=g.toString()}d.addColorStop(e/(b-1),g)}return d}}var P=[],v={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,
labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,
color:"#545454",backgroundColor:null,tickColor:"rgba(0,0,0,0.15)",labelMargin:5,borderWidth:2,borderColor:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},pa=null,sa=null,ka=null,s=null,Y=null,C={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},K={left:0,right:0,top:0,bottom:0},Z=0,ea=0,aa=0,ba=0,da={processOptions:[],processRawData:[],processDatapoints:[],draw:[],bindEvents:[],drawOverlay:[]},U=this;U.setData=
I;U.setupGrid=T;U.draw=ma;U.getPlaceholder=function(){return m};U.getCanvas=function(){return pa};U.getPlotOffset=function(){return K};U.width=function(){return aa};U.height=function(){return ba};U.offset=function(){var a=ka.offset();a.left+=K.left;a.top+=K.top;return a};U.getData=function(){return P};U.getAxes=function(){return C};U.getOptions=function(){return v};U.highlight=ya;U.unhighlight=xa;U.triggerRedrawOverlay=ra;U.pointOffset=function(a){return{left:parseInt(j(a,"xaxis").p2c(+a.x)+K.left),
top:parseInt(j(a,"yaxis").p2c(+a.y)+K.top)}};U.hooks=da;B(U);q(p);O();I(F);T();ma();R();var fa=[],ua=null}function z(m,F){return F*Math.floor(m/F)}f.plot=function(m,F,p){return m=new G(f(m),F,p,f.plot.plugins)};f.plot.plugins=[];f.plot.formatDate=function(m,F,p){var E=function(y){y=""+y;return y.length==1?"0"+y:y},H=[],B=false,q=m.getUTCHours(),I=q<12;if(p==null)p=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(F.search(/%p|%P/)!=-1)if(q>12)q-=12;else if(q==0)q=12;for(var L=
0;L<F.length;++L){var j=F.charAt(L);if(B){switch(j){case "h":j=""+q;break;case "H":j=E(q);break;case "M":j=E(m.getUTCMinutes());break;case "S":j=E(m.getUTCSeconds());break;case "d":j=""+m.getUTCDate();break;case "m":j=""+(m.getUTCMonth()+1);break;case "y":j=""+m.getUTCFullYear();break;case "b":j=""+p[m.getUTCMonth()];break;case "p":j=I?"am":"pm";break;case "P":j=I?"AM":"PM";break}H.push(j);B=false}else if(j=="%")B=true;else H.push(j)}return H.join("")}})(jQuery);
(function(f){function G(q){var I=this,L,j=q.data||{};if(j.elem){I=q.dragTarget=j.elem;q.dragProxy=B.proxy||I;q.cursorOffsetX=j.pageX-j.left;q.cursorOffsetY=j.pageY-j.top;q.offsetX=q.pageX-q.cursorOffsetX;q.offsetY=q.pageY-q.cursorOffsetY}else if(B.dragging||j.which>0&&q.which!=j.which||f(q.target).is(j.not))return;switch(q.type){case "mousedown":f.extend(j,f(I).offset(),{elem:I,target:q.target,pageX:q.pageX,pageY:q.pageY});E.add(document,"mousemove mouseup",G,j);p(I,false);B.dragging=null;return false;
case !B.dragging&&"mousemove":if(m(q.pageX-j.pageX)+m(q.pageY-j.pageY)<j.distance)break;q.target=j.target;L=z(q,"dragstart",I);if(L!==false){B.dragging=I;B.proxy=q.dragProxy=f(L||I)[0]}case "mousemove":if(B.dragging){L=z(q,"drag",I);if(H.drop){H.drop.allowed=L!==false;H.drop.handler(q)}if(L!==false)break;q.type="mouseup"}case "mouseup":E.remove(document,"mousemove mouseup",G);if(B.dragging){H.drop&&H.drop.handler(q);z(q,"dragend",I)}p(I,true);B.dragging=B.proxy=j.elem=false;break}return true}function z(q,
I,L){q.type=I;I=f.event.handle.call(L,q);return I===false?false:I||q.result}function m(q){return Math.pow(q,2)}function F(){return B.dragging===false}function p(q,I){if(q){q.unselectable=I?"off":"on";q.onselectstart=function(){return I};if(q.style)q.style.MozUserSelect=I?"":"none"}}f.fn.drag=function(q,I,L){I&&this.bind("dragstart",q);L&&this.bind("dragend",L);return!q?this.trigger("drag"):this.bind("drag",I?I:q)};var E=f.event,H=E.special,B=H.drag={not:":input",distance:0,which:1,dragging:false,
setup:function(q){q=f.extend({distance:B.distance,which:B.which,not:B.not},q||{});q.distance=m(q.distance);E.add(this,"mousedown",G,q);this.attachEvent&&this.attachEvent("ondragstart",F)},teardown:function(){E.remove(this,"mousedown",G);if(this===B.dragging)B.dragging=B.proxy=false;p(this,true);this.detachEvent&&this.detachEvent("ondragstart",F)}};H.dragstart=H.dragend={setup:function(){},teardown:function(){}}})(jQuery);
(function(f){function G(m){var F=[].slice.call(arguments,1),p=0;m=f.event.fix(m||window.event);m.type="mousewheel";if(m.wheelDelta)p=m.wheelDelta/120;if(m.detail)p=-m.detail/3;F.unshift(m,p);return f.event.handle.apply(this,F)}var z=["DOMMouseScroll","mousewheel"];f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var m=z.length;m;)this.addEventListener(z[--m],G,false);else this.onmousewheel=G},teardown:function(){if(this.removeEventListener)for(var m=z.length;m;)this.removeEventListener(z[--m],
G,false);else this.onmousewheel=null}};f.fn.extend({mousewheel:function(m){return m?this.bind("mousewheel",m):this.trigger("mousewheel")},unmousewheel:function(m){return this.unbind("mousewheel",m)}})})(jQuery);
(function(f){function G(m){function F(p,E){var H=p.getOptions();if(H.zoom.interactive){function B(j,y){var J=p.offset();J.left=j.pageX-J.left;J.top=j.pageY-J.top;y?p.zoomOut({center:J}):p.zoom({center:J})}E[H.zoom.trigger](B);E.mousewheel(function(j,y){B(j,y<0);return false})}if(H.pan.interactive){var q="default",I=0,L=0;E.bind("dragstart",{distance:10},function(j){if(j.which!=1)return false;eventHolderCursor=E.css("cursor");E.css("cursor","move");I=j.pageX;L=j.pageY});E.bind("drag",function(){});
E.bind("dragend",function(j){E.css("cursor",q);p.pan({left:I-j.pageX,top:L-j.pageY})})}}m.zoomOut=function(p){p||(p={});if(!p.amount)p.amount=m.getOptions().zoom.amount;p.amount=1/p.amount;m.zoom(p)};m.zoom=function(p){function E(R,T,V){var W=H[V];V=B[V];if(W.used){R=W.c2p(R);T=W.c2p(T);if(T<R){W=R;R=T;T=W}W=T-R;var ca=V.zoomRange;if(!(ca&&(ca[0]!=null&&W<ca[0]||ca[1]!=null&&W>ca[1]))){V.min=R;V.max=T}}}p||(p={});var H=m.getAxes(),B=m.getOptions(),q=p.center,I=p.amount?p.amount:B.zoom.amount,L=m.width(),
j=m.height();q||(q={left:L/2,top:j/2});var y=q.left/L,J=q.left-y*L/I;L=q.left+(1-y)*L/I;var O=q.top/j;y=q.top-O*j/I;q=q.top+(1-O)*j/I;E(J,L,"xaxis");E(J,L,"x2axis");E(y,q,"yaxis");E(y,q,"y2axis");m.setupGrid();m.draw();p.preventEvent||m.getPlaceholder().trigger("plotzoom",[m])};m.pan=function(p){function E(L,j){var y=q[j];j=I[j];var J;if(y.used){J=y.c2p(y.p2c(y.min)+L);y=y.c2p(y.p2c(y.max)+L);var O=j.panRange;if(O){if(O[0]!=null&&O[0]>J){L=O[0]-J;J+=L;y+=L}if(O[1]!=null&&O[1]<y){L=O[1]-y;J+=L;y+=
L}}j.min=J;j.max=y}}var H=+p.left,B=+p.top,q=m.getAxes(),I=m.getOptions();if(isNaN(H))H=0;if(isNaN(B))B=0;E(H,"xaxis");E(H,"x2axis");E(B,"yaxis");E(B,"y2axis");m.setupGrid();m.draw();p.preventEvent||m.getPlaceholder().trigger("plotpan",[m])};m.hooks.bindEvents.push(F)}var z={xaxis:{zoomRange:null,panRange:null},zoom:{interactive:false,trigger:"dblclick",amount:1.5},pan:{interactive:false}};f.plot.plugins.push({init:G,options:z,name:"navigate",version:"1.1"})})(jQuery);
$(document).ready(function(){function f(){$("#activity").length==0&&$('<div id="activity"></div>').appendTo(T);$("#activity").fadeTo(100,0.8)}function G(){$("#activity").fadeTo(100,0)}function z(){function N(S){return{data:R.plot_pairs[S],color:ma[Q++],attribute_name:S}}var Q=0;f();V={};$(".metric_toggler input").each(function(){V[this.id]=N(this.id)});V.barometer.yaxis=2;return V}function m(N,Q,S,X){$("#tooltip").length==0&&$('<div id="tooltip"></div>').appendTo("body");X&&$("#tooltip").css("background-color",
X);$("#tooltip").stop().html(S).css({top:Q+5,left:N+5}).show().fadeTo(200,0.8)}function F(){return(O.getAxes().xaxis.max-O.getAxes().xaxis.min)/5}function p(N){var Q=O.getAxes().xaxis.min,S=Q+F();return Q<N.x&&N.x<S}function E(N){var Q=O.getAxes().xaxis.max,S=Q-F();return S<N.x&&N.x<Q}function H(){$("#left_arrow").length==0&&$('<div id="left_arrow"></div>').css("opacity","0").appendTo(T);$("#left_arrow").stop().fadeTo(50,0.8)}function B(){$("#right_arrow").length==0&&$('<div id="right_arrow"></div>').css("opacity",
"0").appendTo(T);$("#right_arrow").stop().fadeTo(50,0.8)}function q(){$("#left_arrow").stop().fadeTo(50,0)}function I(){$("#right_arrow").stop().fadeTo(50,0)}function L(N){$.extend(R.times,N.times);for(name in R.plot_pairs)if(N.earliest_point<R.earliest_point)R.plot_pairs[name]=N.plot_pairs[name].concat(R.plot_pairs[name]);R.earliest_point=Math.min(R.earliest_point,N.earliest_point);z()}function j(N){var Q=29.9213,S=function(X){var ia=[[Q,'<span class="baro_label">1 atm</span>']],ha=Math.ceil(X.min*
5)/5;do{ia.push([ha,'<span class="baro_label">'+Math.round(ha*5)/5+" "+Base.I18n.barometer.unit+"</span>"]);ha+=0.2}while(ha<X.max);return ia};O=$.plot(T,N,{xaxis:{mode:"time",min:W,max:ca},yaxis:{min:0,max:Base.ranges.max},y2axis:{min:Base.ranges.barometer.min,max:Base.ranges.barometer.max,ticks:S},legend:{position:"nw",margin:[10,5]},grid:{borderColor:qa,borderWidth:1,backgroundColor:"rgba(0, 0, 0, 0.4)",labelMargin:10,tickColor:na,markings:[{y2axis:{from:Q,to:Q},color:na}],hoverable:true,clickable:true},
series:{lines:{show:true}}});G()}function y(){f();j($(".metric_toggler input:checked").map(function(){return V[this.id]}))}function J(){z();y()}$("a[rel=facebox]").facebox();var O=null,R=null,T=$("#weather"),V=null,W=null,ca=null,ma=["#24f7f2","#b1ec10","#f26522","#ffffff","#ffffff"],qa="#f26522",na="#4e6e8d",ja=144E5,ta=ja*3,la=null,oa=null;T.bind("plothover",function(N,Q,S){if(S){if(oa!=S.datapoint){oa=S.datapoint;$("#tooltip").stop().hide();N=S.datapoint[0];var X=S.datapoint[1].toFixed(2);Q=S.series.attribute_name;
X=X+Base.I18n[Q].unit;if(/hi_speed|wind_speed/.test(Q)){var ia=R.times[N],ha=/hi_speed/.test(Q)?"hi_dir":"wind_dir";ia=ia[ha];X+=" "+ia}X='<h3><span class="attribute">'+Base.I18n[Q].title+':</span> <span class="value">'+X+'</span></h3><p class="time">'+(new Date(N)).format('ddd, mmm d, yyyy"<br/>" h:MM TT Z')+"</p>";m(S.pageX,S.pageY,X,S.series.color)}}else{$("#tooltip").stop().fadeTo(200,0);oa=null;if(p(Q)){H();I()}else{E(Q)?B():I();q()}}});T.bind("plotclick",function(N,Q,S){if(!S)if(la)Base.log("double click?",
la);else if(p(Q)){N=O.getAxes().xaxis.min;W=N=N-ja;ca=O.getAxes().xaxis.max-ja;if(N<R.earliest_point){N=+new Date(W-W%ta);Q=+new Date(R.earliest_point-1E3);N="/observations/range/"+N+"/"+Q+".json";f();la=$.getJSON(N,function(X){L(X);y();la=null})}else y()}else if(E(Q)){N=O.getAxes().xaxis.max;N=N+ja;if(!(N>R.latest_point)){W=O.getAxes().xaxis.min+ja;ca=N;y()}}});$(".metric_toggler input").change(function(){y()}).each(function(N){$(this).parents(".metric_toggler").find("label").css("background-color",
ma[N])});$(".metric_toggler.default_on input").attr("checked","checked");f();$.getJSON(Base.five_min_path,function(N){R=N;J()})});