(function(f){function F(j){if(f.facebox.settings.inited)return true;else f.facebox.settings.inited=true;f(document).trigger("init.facebox");v();var A=f.facebox.settings.imageTypes.join("|");f.facebox.settings.imageTypesRegexp=new RegExp(".("+A+")(\\?\\d+)?$","i");j&&f.extend(f.facebox.settings,j);f("body").append(f.facebox.settings.faceboxHtml);var J=[];f("#facebox").find(".b:first, .bl, .br, .tl, .tr").each(function(){J.push(new Image);J.slice(-1).src=f(this).css("background-image").replace(/url\((.+)\)/,
"$1")});f("#facebox .close").click(f.facebox.close)}function z(j){return j=f(j).data("title")?f(j).data("title"):j.title?j.title:j.alt}function o(){var j,A;if(self.pageYOffset){A=self.pageYOffset;j=self.pageXOffset}else if(document.documentElement&&document.documentElement.scrollTop){A=document.documentElement.scrollTop;j=document.documentElement.scrollLeft}else if(document.body){A=document.body.scrollTop;j=document.body.scrollLeft}return new Array(j,A)}function Q(){var j;if(self.innerHeight)j=self.innerHeight;
else if(document.documentElement&&document.documentElement.clientHeight)j=document.documentElement.clientHeight;else if(document.body)j=document.body.clientHeight;return j}function v(){var j=f.facebox.settings;j.imageTypes=j.image_types||j.imageTypes;j.faceboxHtml=j.facebox_html||j.faceboxHtml}function E(j,A,J){if(j.match(/#/)){var O=window.location.href.split("#")[0];j=j.replace(O,"");f.facebox.reveal(f(j).children(),A,J);f(j).append('<div id="facebox_moved" />')}else j.match(f.facebox.settings.imageTypesRegexp)?
K(j,A,J):D(j,A,J)}function K(j,A,J){var O=new Image;O.onload=function(){f.facebox.reveal('<div class="facebox_image"><img src="'+O.src+'" /></div>',A,J)};O.src=j}function D(j,A,J){f.get(j,function(O){f.facebox.reveal(O,A,J)})}function s(){return f.facebox.settings.overlay==false||f.facebox.settings.opacity===null}function H(){if(!s()){f("#facebox_overlay").length==0&&f("body").append('<div id="facebox_overlay" class="facebox_hide"></div>');f("#facebox_overlay").hide().addClass("facebox_overlayBG").css("opacity",
f.facebox.settings.opacity).click(function(){f.facebox.close()}).fadeIn(200);return false}}function L(){if(!s()){f("#facebox_overlay").fadeOut(200,function(){f("#facebox_overlay").removeClass("facebox_overlayBG");f("#facebox_overlay").addClass("facebox_hide");f("#facebox_overlay").remove()});return false}}f.facebox=function(j,A,J){f.facebox.loading();if(j.ajax)D(j.ajax,A,J);else if(j.image)K(j.image,A,J);else if(j.div)E(j.div,A,J);else f.isFunction(j)?j.call(f):f.facebox.reveal(j,A,J)};f.extend(f.facebox,
{settings:{opacity:0.5,overlay:true,imageTypes:["png","jpg","jpeg","gif"],faceboxHtml:'    <div id="facebox" style="display:none;">       <div class="popup">         <table>           <tbody>             <tr>               <td class="tl"/><td class="b"/><td class="tr"/>             </tr>             <tr>               <td class="b"/>               <td class="body">                 <div class="title"> \t\t\t\t  <h2></h2>                   <a href="#" class="close">close</a>                 </div>                 <div class="content">                 </div>               </td>               <td class="b"/>             </tr>             <tr>               <td class="bl"/><td class="b"/><td class="br"/>             </tr>           </tbody>         </table>       </div>     </div>'},
loading:function(){F();if(f("#facebox .loading").length==1)return true;H();f("#facebox .content").empty();f("#facebox .body").children().hide().end().append('<div class="loading"></div>');f("#facebox").css({top:o()[1]+Q()/10,left:f(window).width()/2-360}).show().css({left:f(window).width()/2-f("#facebox table").width()/2});f(document).bind("keydown.facebox",function(j){j.keyCode==27&&f.facebox.close();return true});f(document).trigger("loading.facebox")},reveal:function(j,A,J){f(document).trigger("beforeReveal.facebox");
J&&f("#facebox .content").addClass(J);A?f("#facebox .title h2").text(A):f("#facebox .title h2").empty();f("#facebox .content").append(j);f("#facebox .loading").remove();f("#facebox .body").children().fadeIn("normal");f("#facebox").css("left",f(window).width()/2-f("#facebox table").width()/2);f(document).trigger("reveal.facebox").trigger("afterReveal.facebox")},close:function(){result=f(document).triggerHandler("beforeClose.facebox");result!=false&&f(document).trigger("close.facebox");return false}});
f.fn.facebox=function(j){function A(){f.facebox.loading(true);var J=this.rel.match(/facebox\[?\.(\w+)\]?/);if(J)J=J[1];var O=z(this);E(this.href,O,J);return false}F(j);this.each(function(){this.title&&f(this).data("title",this.title)});return this.bind("click.facebox",A)};f(document).bind("close.facebox",function(){f(document).unbind("keydown.facebox");f("#facebox").fadeOut(function(){f(document).trigger("afterClose.facebox");f("#facebox_moved").length==0?f("#facebox .content").removeClass().addClass("content"):
f("#facebox_moved").after(f("#facebox .content").children()).remove();L();f("#facebox .loading").remove()})})})(jQuery);var Base={};Base.register_variable=function(f,F,z){if(z){if(typeof Base[z]==="undefined")Base[z]={};Base[z][f]=F}else Base[f]=F};Base.reg=Base.register_variable;$(window).ajaxComplete(function(f,F){if(f=F.getResponseHeader("X-JSON-FLASH")){f=window.eval("("+f+")");$.each(f,function(z,o){Base.flash(o,z)})}});
Base.console=function(f){Base.DEBUG&&window.console&&window.console[f]&&window.console[f].apply(null,Array.prototype.slice.apply(arguments,[1]))};(function(f){for(i in f)(function(F){Base[F]=function(){Base.DEBUG&&Base.console.apply(null,[F,"Base","["+(new Date).toLocaleTimeString()+"]"].concat(Array.prototype.slice.apply(arguments)))}})(f[i])})(["log","debug","info","warn","error"]);
(function(f){for(i in f)(function(F){Base.console[F]=function(){Base.DEBUG&&Base.console.apply(null,[F].concat(Array.prototype.slice.apply(arguments)))}})(f[i])})(["log","debug","info","warn","error","assert","dir","dirxml","trace","group","groupEnd","time","timeEnd","profile","profileEnd","count"]);$(window).bind("ajaxStart ajaxSend ajaxComplete ajaxSuccess",Base.debug);String.prototype.capitalize=function(){return this[0].toUpperCase()+this.substr(1,this.length-1)};
String.prototype.titleize=function(){res=[];var f=this.split(/_| /);$.each(f,function(F,z){res.push(z.capitalize())});return res.join(" ")};
(function(){jQuery.color={};jQuery.color.make=function(F,z,o,Q){var v={};v.r=F||0;v.g=z||0;v.b=o||0;v.a=Q!=null?Q:1;v.add=function(E,K){for(var D=0;D<E.length;++D)v[E.charAt(D)]+=K;return v.normalize()};v.scale=function(E,K){for(var D=0;D<E.length;++D)v[E.charAt(D)]*=K;return v.normalize()};v.toString=function(){return v.a>=1?"rgb("+[v.r,v.g,v.b].join(",")+")":"rgba("+[v.r,v.g,v.b,v.a].join(",")+")"};v.normalize=function(){function E(K,D,s){return D<K?K:D>s?s:D}v.r=E(0,parseInt(v.r),255);v.g=E(0,
parseInt(v.g),255);v.b=E(0,parseInt(v.b),255);v.a=E(0,v.a,1);return v};v.clone=function(){return jQuery.color.make(v.r,v.b,v.g,v.a)};return v.normalize()};jQuery.color.extract=function(F,z){var o;do{o=F.css(z).toLowerCase();if(o!=""&&o!="transparent")break;F=F.parent()}while(!jQuery.nodeName(F.get(0),"body"));if(o=="rgba(0, 0, 0, 0)")o="transparent";return jQuery.color.parse(o)};jQuery.color.parse=function(F){var z,o=jQuery.color.make;if(z=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(F))return o(parseInt(z[1],
10),parseInt(z[2],10),parseInt(z[3],10));if(z=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F))return o(parseInt(z[1],10),parseInt(z[2],10),parseInt(z[3],10),parseFloat(z[4]));if(z=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(F))return o(parseFloat(z[1])*2.55,parseFloat(z[2])*2.55,parseFloat(z[3])*2.55);if(z=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(F))return o(parseFloat(z[1])*
2.55,parseFloat(z[2])*2.55,parseFloat(z[3])*2.55,parseFloat(z[4]));if(z=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(F))return o(parseInt(z[1],16),parseInt(z[2],16),parseInt(z[3],16));if(z=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(F))return o(parseInt(z[1]+z[1],16),parseInt(z[2]+z[2],16),parseInt(z[3]+z[3],16));F=jQuery.trim(F).toLowerCase();if(F=="transparent")return o(255,255,255,0);else{z=f[F];return o(z[0],z[1],z[2])}};var f={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,
220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],
lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}})();
(function(f){function F(o,Q,v,E){function K(a,d){d=[T].concat(d);for(var e=0;e<a.length;++e)a[e].apply(this,d)}function D(){for(var a=0;a<E.length;++a){var d=E[a];d.init(T);d.options&&f.extend(true,u,d.options)}}function s(a){f.extend(true,u,a);if(u.grid.borderColor==null)u.grid.borderColor=u.grid.color;if(u.xaxis.noTicks&&u.xaxis.ticks==null)u.xaxis.ticks=u.xaxis.noTicks;if(u.yaxis.noTicks&&u.yaxis.ticks==null)u.yaxis.ticks=u.yaxis.noTicks;if(u.grid.coloredAreas)u.grid.markings=u.grid.coloredAreas;
if(u.grid.coloredAreasColor)u.grid.markingsColor=u.grid.coloredAreasColor;u.lines&&f.extend(true,u.series.lines,u.lines);u.points&&f.extend(true,u.series.points,u.points);u.bars&&f.extend(true,u.series.bars,u.bars);if(u.shadowSize)u.series.shadowSize=u.shadowSize;for(var d in da)if(u.hooks[d]&&u.hooks[d].length)da[d]=da[d].concat(u.hooks[d]);K(da.processOptions,[u])}function H(a){P=L(a);A();J()}function L(a){for(var d=[],e=0;e<a.length;++e){var c=f.extend(true,{},u.series);if(a[e].data){c.data=a[e].data;
delete a[e].data;f.extend(true,c,a[e]);a[e].data=c.data}else c.data=a[e];d.push(c)}return d}function j(a,d){a=a[d];if(!a||a==1)return B[d];if(typeof a=="number")return B[d.charAt(0)+a+d.slice(1)];return a}function A(){var a,d=P.length,e=[],c=[];for(a=0;a<P.length;++a){var b=P[a].color;if(b!=null){--d;typeof b=="number"?c.push(b):e.push(f.color.parse(P[a].color))}}for(a=0;a<c.length;++a)d=Math.max(d,c[a]+1);e=[];for(a=c=0;e.length<d;){b=u.colors.length==a?f.color.make(100,100,100):f.color.parse(u.colors[a]);
var g=c%2==1?-1:1;b.scale("rgb",1+g*Math.ceil(c/2)*0.2);e.push(b);++a;if(a>=u.colors.length){a=0;++c}}for(a=d=0;a<P.length;++a){c=P[a];if(c.color==null){c.color=e[d].toString();++d}else if(typeof c.color=="number")c.color=e[c.color].toString();if(c.lines.show==null){var k;b=true;for(k in c)if(c[k].show){b=false;break}if(b)c.lines.show=true}c.xaxis=j(c,"xaxis");c.yaxis=j(c,"yaxis")}}function J(){function a(y,I,ha){if(I<y.datamin)y.datamin=I;if(ha>y.datamax)y.datamax=ha}var d=Number.POSITIVE_INFINITY,
e=Number.NEGATIVE_INFINITY,c,b,g,k,h,l,m,p,n,C,x;for(p in B){B[p].datamin=d;B[p].datamax=e;B[p].used=false}for(c=0;c<P.length;++c){h=P[c];h.datapoints={points:[]};K(da.processRawData,[h,h.data,h.datapoints])}for(c=0;c<P.length;++c){h=P[c];var w=h.data,r=h.datapoints.format;if(!r){r=[];r.push({x:true,number:true,required:true});r.push({y:true,number:true,required:true});h.bars.show&&r.push({y:true,number:true,required:false,defaultValue:0});h.datapoints.format=r}if(h.datapoints.pointsize==null){if(h.datapoints.pointsize==
null)h.datapoints.pointsize=r.length;m=h.datapoints.pointsize;l=h.datapoints.points;insertSteps=h.lines.show&&h.lines.steps;h.xaxis.used=h.yaxis.used=true;for(b=g=0;b<w.length;++b,g+=m){x=w[b];var t=x==null;if(!t)for(k=0;k<m;++k){n=x[k];if(C=r[k]){if(C.number&&n!=null){n=+n;if(isNaN(n))n=null}if(n==null){if(C.required)t=true;if(C.defaultValue!=null)n=C.defaultValue}}l[g+k]=n}if(t)for(k=0;k<m;++k){n=l[g+k];if(n!=null){C=r[k];C.x&&a(h.xaxis,n,n);C.y&&a(h.yaxis,n,n)}l[g+k]=null}else if(insertSteps&&
g>0&&l[g-m]!=null&&l[g-m]!=l[g]&&l[g-m+1]!=l[g+1]){for(k=0;k<m;++k)l[g+m+k]=l[g+k];l[g+1]=l[g-m+1];g+=m}}}}for(c=0;c<P.length;++c){h=P[c];K(da.processDatapoints,[h,h.datapoints])}for(c=0;c<P.length;++c){h=P[c];l=h.datapoints.points;m=h.datapoints.pointsize;x=g=d;t=w=e;for(b=0;b<l.length;b+=m)if(l[b]!=null)for(k=0;k<m;++k){n=l[b+k];if(C=r[k]){if(C.x){if(n<g)g=n;if(n>w)w=n}if(C.y){if(n<x)x=n;if(n>t)t=n}}}if(h.bars.show){b=h.bars.align=="left"?0:-h.bars.barWidth/2;if(h.bars.horizontal){x+=b;t+=b+h.bars.barWidth}else{g+=
b;w+=b+h.bars.barWidth}}a(h.xaxis,g,w);a(h.yaxis,x,t)}for(p in B){if(B[p].datamin==d)B[p].datamin=null;if(B[p].datamax==e)B[p].datamax=null}}function O(){function a(d,e){var c=document.createElement("canvas");c.width=d;c.height=e;if(f.browser.msie)c=window.G_vmlCanvasManager.initElement(c);return c}Z=o.width();ea=o.height();o.html("");o.css("position")=="static"&&o.css("position","relative");if(Z<=0||ea<=0)throw"Invalid dimensions for plot, width = "+Z+", height = "+ea;f.browser.msie&&window.G_vmlCanvasManager.init_(document);
ma=f(a(Z,ea)).appendTo(o).get(0);q=ma.getContext("2d");oa=f(a(Z,ea)).css({position:"absolute",left:0,top:0}).appendTo(o).get(0);W=oa.getContext("2d");W.stroke()}function R(){ja=f([oa,ma]);u.grid.hoverable&&ja.mousemove(wa);u.grid.clickable&&ja.click(xa);K(da.bindEvents,[ja])}function U(){function a(b,g){function k(n){return n}var h,l,m=g.transform||k,p=g.inverseTransform;if(b==B.xaxis||b==B.x2axis){h=b.scale=aa/(m(b.max)-m(b.min));l=m(b.min);b.p2c=m==k?function(n){return(n-l)*h}:function(n){return(m(n)-
l)*h};b.c2p=p?function(n){return p(l+n/h)}:function(n){return l+n/h}}else{h=b.scale=ba/(m(b.max)-m(b.min));l=m(b.max);b.p2c=m==k?function(n){return(l-n)*h}:function(n){return(l-m(n))*h};b.c2p=p?function(n){return p(l-n/h)}:function(n){return l-n/h}}}function d(b,g){var k=[],h;b.labelWidth=g.labelWidth;b.labelHeight=g.labelHeight;if(b==B.xaxis||b==B.x2axis){if(b.labelWidth==null)b.labelWidth=Z/(b.ticks.length>0?b.ticks.length:1);if(b.labelHeight==null){k=[];for(g=0;g<b.ticks.length;++g)(h=b.ticks[g].label)&&
k.push('<div class="tickLabel" style="float:left;width:'+b.labelWidth+'px">'+h+"</div>");if(k.length>0){k=f('<div style="position:absolute;top:-10000px;width:10000px;font-size:smaller">'+k.join("")+'<div style="clear:left"></div></div>').appendTo(o);b.labelHeight=k.height();k.remove()}}}else if(b.labelWidth==null||b.labelHeight==null){for(g=0;g<b.ticks.length;++g)(h=b.ticks[g].label)&&k.push('<div class="tickLabel">'+h+"</div>");if(k.length>0){k=f('<div style="position:absolute;top:-10000px;font-size:smaller">'+
k.join("")+"</div>").appendTo(o);if(b.labelWidth==null)b.labelWidth=k.width();if(b.labelHeight==null)b.labelHeight=k.find("div").height();k.remove()}}if(b.labelWidth==null)b.labelWidth=0;if(b.labelHeight==null)b.labelHeight=0}function e(){var b=u.grid.borderWidth;for(i=0;i<P.length;++i)b=Math.max(b,2*(P[i].points.radius+P[i].points.lineWidth/2));G.left=G.right=G.top=G.bottom=b;var g=u.grid.labelMargin+u.grid.borderWidth;if(B.xaxis.labelHeight>0)G.bottom=Math.max(b,B.xaxis.labelHeight+g);if(B.yaxis.labelWidth>
0)G.left=Math.max(b,B.yaxis.labelWidth+g);if(B.x2axis.labelHeight>0)G.top=Math.max(b,B.x2axis.labelHeight+g);if(B.y2axis.labelWidth>0)G.right=Math.max(b,B.y2axis.labelWidth+g);aa=Z-G.left-G.right;ba=ea-G.bottom-G.top}var c;for(c in B)X(B[c],u[c]);if(u.grid.show){for(c in B){V(B[c],u[c]);ca(B[c],u[c]);d(B[c],u[c])}e()}else{G.left=G.right=G.top=G.bottom=0;aa=Z;ba=ea}for(c in B)a(B[c],u[c]);u.grid.show&&N();ya()}function X(a,d){var e=+(d.min!=null?d.min:a.datamin),c=+(d.max!=null?d.max:a.datamax),b=
c-e;if(b==0){b=c==0?1:0.01;if(d.min==null)e-=b;if(d.max==null||d.min!=null)c+=b}else{var g=d.autoscaleMargin;if(g!=null){if(d.min==null){e-=b*g;if(e<0&&a.datamin!=null&&a.datamin>=0)e=0}if(d.max==null){c+=b*g;if(c>0&&a.datamax!=null&&a.datamax<=0)c=0}}}a.min=e;a.max=c}function V(a,d){var e;e=typeof d.ticks=="number"&&d.ticks>0?d.ticks:a==B.xaxis||a==B.x2axis?0.3*Math.sqrt(Z):0.3*Math.sqrt(ea);var c=(a.max-a.min)/e,b,g;if(d.mode=="time"){var k={second:1E3,minute:6E4,hour:36E5,day:864E5,month:2592E6,
year:525949.2*60*1E3};g=[[1,"second"],[2,"second"],[5,"second"],[10,"second"],[30,"second"],[1,"minute"],[2,"minute"],[5,"minute"],[10,"minute"],[30,"minute"],[1,"hour"],[2,"hour"],[4,"hour"],[8,"hour"],[12,"hour"],[1,"day"],[2,"day"],[3,"day"],[0.25,"month"],[0.5,"month"],[1,"month"],[2,"month"],[3,"month"],[6,"month"],[1,"year"]];e=0;if(d.minTickSize!=null)e=typeof d.tickSize=="number"?d.tickSize:d.minTickSize[0]*k[d.minTickSize[1]];for(b=0;b<g.length-1;++b)if(c<(g[b][0]*k[g[b][1]]+g[b+1][0]*k[g[b+
1][1]])/2&&g[b][0]*k[g[b][1]]>=e)break;e=g[b][0];b=g[b][1];if(b=="year"){g=Math.pow(10,Math.floor(Math.log(c/k.year)/Math.LN10));c=c/k.year/g;e=c<1.5?1:c<3?2:c<7.5?5:10;e*=g}if(d.tickSize){e=d.tickSize[0];b=d.tickSize[1]}c=function(m){var p=[],n=m.tickSize[0],C=m.tickSize[1],x=new Date(m.min),w=n*k[C];C=="second"&&x.setUTCSeconds(z(x.getUTCSeconds(),n));C=="minute"&&x.setUTCMinutes(z(x.getUTCMinutes(),n));C=="hour"&&x.setUTCHours(z(x.getUTCHours(),n));C=="month"&&x.setUTCMonth(z(x.getUTCMonth(),n));
C=="year"&&x.setUTCFullYear(z(x.getUTCFullYear(),n));x.setUTCMilliseconds(0);w>=k.minute&&x.setUTCSeconds(0);w>=k.hour&&x.setUTCMinutes(0);w>=k.day&&x.setUTCHours(0);w>=k.day*4&&x.setUTCDate(1);w>=k.year&&x.setUTCMonth(0);var r=0,t=Number.NaN,y;do{y=t;t=x.getTime();p.push({v:t,label:m.tickFormatter(t,m)});if(C=="month")if(n<1){x.setUTCDate(1);var I=x.getTime();x.setUTCMonth(x.getUTCMonth()+1);var ha=x.getTime();x.setTime(t+r*k.hour+(ha-I)*n);r=x.getUTCHours();x.setUTCHours(0)}else x.setUTCMonth(x.getUTCMonth()+
n);else C=="year"?x.setUTCFullYear(x.getUTCFullYear()+n):x.setTime(t+w)}while(t<m.max&&t!=y);return p};g=function(m,p){m=new Date(m);if(d.timeformat!=null)return f.plot.formatDate(m,d.timeformat,d.monthNames);var n=p.tickSize[0]*k[p.tickSize[1]];p=p.max-p.min;var C=d.twelveHourClock?" %p":"";fmt=n<k.minute?"%h:%M:%S"+C:n<k.day?p<2*k.day?"%h:%M"+C:"%b %d %h:%M"+C:n<k.month?"%b %d":n<k.year?p<k.year?"%b":"%b %y":"%y";return f.plot.formatDate(m,fmt,d.monthNames)}}else{var h=d.tickDecimals,l=-Math.floor(Math.log(c)/
Math.LN10);if(h!=null&&l>h)l=h;g=Math.pow(10,-l);c=c/g;if(c<1.5)e=1;else if(c<3){e=2;if(c>2.25&&(h==null||l+1<=h)){e=2.5;++l}}else e=c<7.5?5:10;e*=g;if(d.minTickSize!=null&&e<d.minTickSize)e=d.minTickSize;if(d.tickSize!=null)e=d.tickSize;a.tickDecimals=Math.max(0,h!=null?h:l);c=function(m){var p=[],n=z(m.min,m.tickSize),C=0,x=Number.NaN,w;do{w=x;x=n+C*m.tickSize;p.push({v:x,label:m.tickFormatter(x,m)});++C}while(x<m.max&&x!=w);return p};g=function(m,p){return m.toFixed(p.tickDecimals)}}a.tickSize=
b?[e,b]:e;a.tickGenerator=c;a.tickFormatter=f.isFunction(d.tickFormatter)?function(m,p){return""+d.tickFormatter(m,p)}:g}function ca(a,d){a.ticks=[];if(a.used){if(d.ticks==null)a.ticks=a.tickGenerator(a);else if(typeof d.ticks=="number"){if(d.ticks>0)a.ticks=a.tickGenerator(a)}else if(d.ticks){var e=d.ticks;if(f.isFunction(e))e=e({min:a.min,max:a.max});var c,b;for(c=0;c<e.length;++c){var g=null,k=e[c];if(typeof k=="object"){b=k[0];if(k.length>1)g=k[1]}else b=k;if(g==null)g=a.tickFormatter(b,a);a.ticks[c]=
{v:b,label:g}}}if(d.autoscaleMargin!=null&&a.ticks.length>0){if(d.min==null)a.min=Math.min(a.min,a.ticks[0].v);if(d.max==null&&a.ticks.length>1)a.max=Math.max(a.max,a.ticks[a.ticks.length-1].v)}}}function la(){q.clearRect(0,0,Z,ea);var a=u.grid;a.show&&!a.aboveData&&M();for(var d=0;d<P.length;++d)S(P[d]);K(da.draw,[q]);a.show&&a.aboveData&&M()}function ka(a,d){var e=d+"axis",c=d+"2axis",b,g;if(a[e]){b=B[e];g=a[e].from;a=a[e].to}else if(a[c]){b=B[c];g=a[c].from;a=a[c].to}else{b=B[e];g=a[d+"1"];a=a[d+
"2"]}if(g!=null&&a!=null&&g>a)return{from:a,to:g,axis:b};return{from:g,to:a,axis:b}}function M(){var a;q.save();q.translate(G.left,G.top);if(u.grid.backgroundColor){q.fillStyle=ra(u.grid.backgroundColor,ba,0,"rgba(255, 255, 255, 0)");q.fillRect(0,0,aa,ba)}var d=u.grid.markings;if(d){if(f.isFunction(d))d=d({xmin:B.xaxis.min,xmax:B.xaxis.max,ymin:B.yaxis.min,ymax:B.yaxis.max,xaxis:B.xaxis,yaxis:B.yaxis,x2axis:B.x2axis,y2axis:B.y2axis});for(a=0;a<d.length;++a){var e=d[a],c=ka(e,"x"),b=ka(e,"y");if(c.from==
null)c.from=c.axis.min;if(c.to==null)c.to=c.axis.max;if(b.from==null)b.from=b.axis.min;if(b.to==null)b.to=b.axis.max;if(!(c.to<c.axis.min||c.from>c.axis.max||b.to<b.axis.min||b.from>b.axis.max)){c.from=Math.max(c.from,c.axis.min);c.to=Math.min(c.to,c.axis.max);b.from=Math.max(b.from,b.axis.min);b.to=Math.min(b.to,b.axis.max);if(!(c.from==c.to&&b.from==b.to)){c.from=c.axis.p2c(c.from);c.to=c.axis.p2c(c.to);b.from=b.axis.p2c(b.from);b.to=b.axis.p2c(b.to);if(c.from==c.to||b.from==b.to){q.beginPath();
q.strokeStyle=e.color||u.grid.markingsColor;q.lineWidth=e.lineWidth||u.grid.markingsLineWidth;q.moveTo(c.from,b.from);q.lineTo(c.to,b.to);q.stroke()}else{q.fillStyle=e.color||u.grid.markingsColor;q.fillRect(c.from,b.to,c.to-c.from,b.from-b.to)}}}}}q.lineWidth=1;q.strokeStyle=u.grid.tickColor;q.beginPath();e=B.xaxis;for(a=0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=B.xaxis.max)){q.moveTo(Math.floor(e.p2c(d))+q.lineWidth/2,0);q.lineTo(Math.floor(e.p2c(d))+q.lineWidth/2,ba)}}e=B.yaxis;for(a=
0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=e.max)){q.moveTo(0,Math.floor(e.p2c(d))+q.lineWidth/2);q.lineTo(aa,Math.floor(e.p2c(d))+q.lineWidth/2)}}e=B.x2axis;for(a=0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=e.max)){q.moveTo(Math.floor(e.p2c(d))+q.lineWidth/2,-5);q.lineTo(Math.floor(e.p2c(d))+q.lineWidth/2,5)}}e=B.y2axis;for(a=0;a<e.ticks.length;++a){d=e.ticks[a].v;if(!(d<=e.min||d>=e.max)){q.moveTo(aa-5,Math.floor(e.p2c(d))+q.lineWidth/2);q.lineTo(aa+5,Math.floor(e.p2c(d))+
q.lineWidth/2)}}q.stroke();if(u.grid.borderWidth){a=u.grid.borderWidth;q.lineWidth=a;q.strokeStyle=u.grid.borderColor;q.strokeRect(-a/2,-a/2,aa+a,ba+a)}q.restore()}function N(){function a(c,b){for(var g=0;g<c.ticks.length;++g){var k=c.ticks[g];!k.label||k.v<c.min||k.v>c.max||d.push(b(k,c))}}o.find(".tickLabels").remove();var d=['<div class="tickLabels" style="font-size:smaller;color:'+u.grid.color+'">'],e=u.grid.labelMargin+u.grid.borderWidth;a(B.xaxis,function(c,b){return'<div style="position:absolute;top:'+
(G.top+ba+e)+"px;left:"+Math.round(G.left+b.p2c(c.v)-b.labelWidth/2)+"px;width:"+b.labelWidth+'px;text-align:center" class="tickLabel">'+c.label+"</div>"});a(B.yaxis,function(c,b){return'<div style="position:absolute;top:'+Math.round(G.top+b.p2c(c.v)-b.labelHeight/2)+"px;right:"+(G.right+aa+e)+"px;width:"+b.labelWidth+'px;text-align:right" class="tickLabel">'+c.label+"</div>"});a(B.x2axis,function(c,b){return'<div style="position:absolute;bottom:'+(G.bottom+ba+e)+"px;left:"+Math.round(G.left+b.p2c(c.v)-
b.labelWidth/2)+"px;width:"+b.labelWidth+'px;text-align:center" class="tickLabel">'+c.label+"</div>"});a(B.y2axis,function(c,b){return'<div style="position:absolute;top:'+Math.round(G.top+b.p2c(c.v)-b.labelHeight/2)+"px;left:"+(G.left+aa+e)+"px;width:"+b.labelWidth+'px;text-align:left" class="tickLabel">'+c.label+"</div>"});d.push("</div>");o.append(d.join(""))}function S(a){a.lines.show&&Y(a);a.bars.show&&za(a);a.points.show&&ia(a)}function Y(a){function d(k,h,l,m,p){var n=k.points;k=k.pointsize;
var C=null,x=null;q.beginPath();for(var w=k;w<n.length;w+=k){var r=n[w-k],t=n[w-k+1],y=n[w],I=n[w+1];if(!(r==null||y==null)){if(t<=I&&t<p.min){if(I<p.min)continue;r=(p.min-t)/(I-t)*(y-r)+r;t=p.min}else if(I<=t&&I<p.min){if(t<p.min)continue;y=(p.min-t)/(I-t)*(y-r)+r;I=p.min}if(t>=I&&t>p.max){if(I>p.max)continue;r=(p.max-t)/(I-t)*(y-r)+r;t=p.max}else if(I>=t&&I>p.max){if(t>p.max)continue;y=(p.max-t)/(I-t)*(y-r)+r;I=p.max}if(r<=y&&r<m.min){if(y<m.min)continue;t=(m.min-r)/(y-r)*(I-t)+t;r=m.min}else if(y<=
r&&y<m.min){if(r<m.min)continue;I=(m.min-r)/(y-r)*(I-t)+t;y=m.min}if(r>=y&&r>m.max){if(y>m.max)continue;t=(m.max-r)/(y-r)*(I-t)+t;r=m.max}else if(y>=r&&y>m.max){if(r>m.max)continue;I=(m.max-r)/(y-r)*(I-t)+t;y=m.max}if(r!=C||t!=x)q.moveTo(m.p2c(r)+h,p.p2c(t)+l);C=y;x=I;q.lineTo(m.p2c(y)+h,p.p2c(I)+l)}}q.stroke()}function e(k,h,l){var m=k.points;k=k.pointsize;var p=Math.min(Math.max(0,l.min),l.max),n;n=0;for(var C=false,x=k;x<m.length;x+=k){var w=m[x-k],r=m[x-k+1],t=m[x],y=m[x+1];if(C&&w!=null&&t==
null){q.lineTo(h.p2c(n),l.p2c(p));q.fill();C=false}else if(!(w==null||t==null)){if(w<=t&&w<h.min){if(t<h.min)continue;r=(h.min-w)/(t-w)*(y-r)+r;w=h.min}else if(t<=w&&t<h.min){if(w<h.min)continue;y=(h.min-w)/(t-w)*(y-r)+r;t=h.min}if(w>=t&&w>h.max){if(t>h.max)continue;r=(h.max-w)/(t-w)*(y-r)+r;w=h.max}else if(t>=w&&t>h.max){if(w>h.max)continue;y=(h.max-w)/(t-w)*(y-r)+r;t=h.max}if(!C){q.beginPath();q.moveTo(h.p2c(w),l.p2c(p));C=true}if(r>=l.max&&y>=l.max){q.lineTo(h.p2c(w),l.p2c(l.max));q.lineTo(h.p2c(t),
l.p2c(l.max));n=t}else if(r<=l.min&&y<=l.min){q.lineTo(h.p2c(w),l.p2c(l.min));q.lineTo(h.p2c(t),l.p2c(l.min));n=t}else{var I=w,ha=t;if(r<=y&&r<l.min&&y>=l.min){w=(l.min-r)/(y-r)*(t-w)+w;r=l.min}else if(y<=r&&y<l.min&&r>=l.min){t=(l.min-r)/(y-r)*(t-w)+w;y=l.min}if(r>=y&&r>l.max&&y<=l.max){w=(l.max-r)/(y-r)*(t-w)+w;r=l.max}else if(y>=r&&y>l.max&&r<=l.max){t=(l.max-r)/(y-r)*(t-w)+w;y=l.max}if(w!=I){n=r<=l.min?l.min:l.max;q.lineTo(h.p2c(I),l.p2c(n));q.lineTo(h.p2c(w),l.p2c(n))}q.lineTo(h.p2c(w),l.p2c(r));
q.lineTo(h.p2c(t),l.p2c(y));if(t!=ha){n=y<=l.min?l.min:l.max;q.lineTo(h.p2c(t),l.p2c(n));q.lineTo(h.p2c(ha),l.p2c(n))}n=Math.max(t,ha)}}}if(C){q.lineTo(h.p2c(n),l.p2c(p));q.fill()}}q.save();q.translate(G.left,G.top);q.lineJoin="round";var c=a.lines.lineWidth,b=a.shadowSize;if(c>0&&b>0){q.lineWidth=b;q.strokeStyle="rgba(0,0,0,0.1)";var g=Math.PI/18;d(a.datapoints,Math.sin(g)*(c/2+b/2),Math.cos(g)*(c/2+b/2),a.xaxis,a.yaxis);q.lineWidth=b/2;d(a.datapoints,Math.sin(g)*(c/2+b/4),Math.cos(g)*(c/2+b/4),
a.xaxis,a.yaxis)}q.lineWidth=c;q.strokeStyle=a.color;if(b=pa(a.lines,a.color,0,ba)){q.fillStyle=b;e(a.datapoints,a.xaxis,a.yaxis)}c>0&&d(a.datapoints,0,0,a.xaxis,a.yaxis);q.restore()}function ia(a){function d(g,k,h,l,m,p,n){var C=g.points;g=g.pointsize;for(var x=0;x<C.length;x+=g){var w=C[x],r=C[x+1];if(!(w==null||w<p.min||w>p.max||r<n.min||r>n.max)){q.beginPath();q.arc(p.p2c(w),n.p2c(r)+l,k,0,m,false);if(h){q.fillStyle=h;q.fill()}q.stroke()}}}q.save();q.translate(G.left,G.top);var e=a.lines.lineWidth,
c=a.shadowSize,b=a.points.radius;if(e>0&&c>0){c=c/2;q.lineWidth=c;q.strokeStyle="rgba(0,0,0,0.1)";d(a.datapoints,b,null,c+c/2,Math.PI,a.xaxis,a.yaxis);q.strokeStyle="rgba(0,0,0,0.2)";d(a.datapoints,b,null,c/2,Math.PI,a.xaxis,a.yaxis)}q.lineWidth=e;q.strokeStyle=a.color;d(a.datapoints,b,pa(a.points,a.color),0,2*Math.PI,a.xaxis,a.yaxis);q.restore()}function ga(a,d,e,c,b,g,k,h,l,m,p){var n,C,x,w;if(p){w=C=x=true;n=false;p=e;a=a;e=d+c;b=d+b;if(a<p){d=a;a=p;p=d;n=true;C=false}}else{n=C=x=true;w=false;
p=a+c;a=a+b;b=e;e=d;if(e<b){d=e;e=b;b=d;w=true;x=false}}if(!(a<h.min||p>h.max||e<l.min||b>l.max)){if(p<h.min){p=h.min;n=false}if(a>h.max){a=h.max;C=false}if(b<l.min){b=l.min;w=false}if(e>l.max){e=l.max;x=false}p=h.p2c(p);b=l.p2c(b);a=h.p2c(a);e=l.p2c(e);if(k){m.beginPath();m.moveTo(p,b);m.lineTo(p,e);m.lineTo(a,e);m.lineTo(a,b);m.fillStyle=k(b,e);m.fill()}if(n||C||x||w){m.beginPath();m.moveTo(p,b+g);n?m.lineTo(p,e+g):m.moveTo(p,e+g);x?m.lineTo(a,e+g):m.moveTo(a,e+g);C?m.lineTo(a,b+g):m.moveTo(a,b+
g);w?m.lineTo(p,b+g):m.moveTo(p,b+g);m.stroke()}}}function za(a){function d(b,g,k,h,l,m,p){var n=b.points;b=b.pointsize;for(var C=0;C<n.length;C+=b)n[C]!=null&&ga(n[C],n[C+1],n[C+2],g,k,h,l,m,p,q,a.bars.horizontal)}q.save();q.translate(G.left,G.top);q.lineWidth=a.bars.lineWidth;q.strokeStyle=a.color;var e=a.bars.align=="left"?0:-a.bars.barWidth/2,c=a.bars.fill?function(b,g){return pa(a.bars,a.color,b,g)}:null;d(a.datapoints,e,e+a.bars.barWidth,0,c,a.xaxis,a.yaxis);q.restore()}function pa(a,d,e,c){var b=
a.fill;if(!b)return null;if(a.fillColor)return ra(a.fillColor,e,c,d);a=f.color.parse(d);a.a=typeof b=="number"?b:0.4;a.normalize();return a.toString()}function ya(){o.find(".legend").remove();if(u.legend.show){var a=[],d=false,e=u.legend.labelFormatter,c,b;for(i=0;i<P.length;++i){c=P[i];if(b=c.label){if(i%u.legend.noColumns==0){d&&a.push("</tr>");a.push("<tr>");d=true}if(e)b=e(b,c);a.push('<td class="legendColorBox"><div style="border:1px solid '+u.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+
c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+b+"</td>")}}d&&a.push("</tr>");if(a.length!=0){d='<table style="font-size:smaller;color:'+u.grid.color+'">'+a.join("")+"</table>";if(u.legend.container!=null)f(u.legend.container).html(d);else{a="";e=u.legend.position;c=u.legend.margin;if(c[0]==null)c=[c,c];if(e.charAt(0)=="n")a+="top:"+(c[1]+G.top)+"px;";else if(e.charAt(0)=="s")a+="bottom:"+(c[1]+G.bottom)+"px;";if(e.charAt(1)=="e")a+="right:"+(c[0]+G.right)+"px;";else if(e.charAt(1)==
"w")a+="left:"+(c[0]+G.left)+"px;";d=f('<div class="legend">'+d.replace('style="','style="position:absolute;'+a+";")+"</div>").appendTo(o);if(u.legend.backgroundOpacity!=0){e=u.legend.backgroundColor;if(e==null){e=(e=u.grid.backgroundColor)&&typeof e=="string"?f.color.parse(e):f.color.extract(d,"background-color");e.a=1;e=e.toString()}c=d.children();f('<div style="position:absolute;width:'+c.width()+"px;height:"+c.height()+"px;"+a+"background-color:"+e+';"> </div>').prependTo(d).css("opacity",u.legend.backgroundOpacity)}}}}}
function Aa(a,d,e){var c=u.grid.mouseActiveRadius,b=c*c+1,g=null,k,h;for(k=0;k<P.length;++k)if(e(P[k])){var l=P[k],m=l.xaxis,p=l.yaxis,n=l.datapoints.points,C=l.datapoints.pointsize,x=m.c2p(a),w=p.c2p(d),r=c/m.scale,t=c/p.scale;if(l.lines.show||l.points.show)for(h=0;h<n.length;h+=C){var y=n[h],I=n[h+1];if(y!=null)if(!(y-x>r||y-x<-r||I-w>t||I-w<-t)){y=Math.abs(m.p2c(y)-a);I=Math.abs(p.p2c(I)-d);I=y*y+I*I;if(I<=b){b=I;g=[k,h/C]}}}if(l.bars.show&&!g){m=l.bars.align=="left"?0:-l.bars.barWidth/2;l=m+l.bars.barWidth;
for(h=0;h<n.length;h+=C){y=n[h];I=n[h+1];p=n[h+2];if(y!=null)if(P[k].bars.horizontal?x<=Math.max(p,y)&&x>=Math.min(p,y)&&w>=I+m&&w<=I+l:x>=y+m&&x<=y+l&&w>=Math.min(p,I)&&w<=Math.max(p,I))g=[k,h/C]}}}if(g){k=g[0];h=g[1];C=P[k].datapoints.pointsize;return{datapoint:P[k].datapoints.points.slice(h*C,(h+1)*C),dataIndex:h,series:P[k],seriesIndex:k}}return null}function wa(a){u.grid.hoverable&&sa("plothover",a,function(d){return d.hoverable!=false})}function xa(a){sa("plotclick",a,function(d){return d.clickable!=
false})}function sa(a,d,e){var c=ja.offset(),b={pageX:d.pageX,pageY:d.pageY},g=d.pageX-c.left-G.left;d=d.pageY-c.top-G.top;if(B.xaxis.used)b.x=B.xaxis.c2p(g);if(B.yaxis.used)b.y=B.yaxis.c2p(d);if(B.x2axis.used)b.x2=B.x2axis.c2p(g);if(B.y2axis.used)b.y2=B.y2axis.c2p(d);if(e=Aa(g,d,e)){e.pageX=parseInt(e.series.xaxis.p2c(e.datapoint[0])+c.left+G.left);e.pageY=parseInt(e.series.yaxis.p2c(e.datapoint[1])+c.top+G.top)}if(u.grid.autoHighlight){for(c=0;c<fa.length;++c){g=fa[c];g.auto==a&&!(e&&g.series==
e.series&&g.point==e.datapoint)&&ta(g.series,g.point)}e&&ua(e.series,e.datapoint,a)}o.trigger(a,[b,e])}function na(){qa||(qa=setTimeout(Ba,30))}function Ba(){qa=null;W.save();W.clearRect(0,0,Z,ea);W.translate(G.left,G.top);var a,d;for(a=0;a<fa.length;++a){d=fa[a];d.series.bars.show?Ca(d.series,d.point):Da(d.series,d.point)}W.restore();K(da.drawOverlay,[W])}function ua(a,d,e){if(typeof a=="number")a=P[a];if(typeof d=="number")d=a.data[d];var c=va(a,d);if(c==-1){fa.push({series:a,point:d,auto:e});na()}else if(!e)fa[c].auto=
false}function ta(a,d){if(a==null&&d==null){fa=[];na()}if(typeof a=="number")a=P[a];if(typeof d=="number")d=a.data[d];a=va(a,d);if(a!=-1){fa.splice(a,1);na()}}function va(a,d){for(var e=0;e<fa.length;++e){var c=fa[e];if(c.series==a&&c.point[0]==d[0]&&c.point[1]==d[1])return e}return-1}function Da(a,d){var e=d[0];d=d[1];var c=a.xaxis,b=a.yaxis;if(!(e<c.min||e>c.max||d<b.min||d>b.max)){var g=a.points.radius+a.points.lineWidth/2;W.lineWidth=g;W.strokeStyle=f.color.parse(a.color).scale("a",0.5).toString();
a=1.5*g;W.beginPath();W.arc(c.p2c(e),b.p2c(d),a,0,2*Math.PI,false);W.stroke()}}function Ca(a,d){W.lineWidth=a.bars.lineWidth;W.strokeStyle=f.color.parse(a.color).scale("a",0.5).toString();var e=f.color.parse(a.color).scale("a",0.5).toString(),c=a.bars.align=="left"?0:-a.bars.barWidth/2;ga(d[0],d[1],d[2]||0,c,c+a.bars.barWidth,0,function(){return e},a.xaxis,a.yaxis,W,a.bars.horizontal)}function ra(a,d,e,c){if(typeof a=="string")return a;else{d=q.createLinearGradient(0,e,0,d);e=0;for(var b=a.colors.length;e<
b;++e){var g=a.colors[e];if(typeof g!="string"){g=f.color.parse(c).scale("rgb",g.brightness);g.a*=g.opacity;g=g.toString()}d.addColorStop(e/(b-1),g)}return d}}var P=[],u={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:true,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:0.85},xaxis:{mode:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,
labelWidth:null,labelHeight:null,tickDecimals:null,tickSize:null,minTickSize:null,monthNames:null,timeformat:null,twelveHourClock:false},yaxis:{autoscaleMargin:0.02},x2axis:{autoscaleMargin:null},y2axis:{autoscaleMargin:0.02},series:{points:{show:false,radius:3,lineWidth:2,fill:true,fillColor:"#ffffff"},lines:{lineWidth:2,fill:false,fillColor:null,steps:false},bars:{show:false,lineWidth:2,barWidth:1,fill:true,fillColor:null,align:"left",horizontal:false},shadowSize:3},grid:{show:true,aboveData:false,
color:"#545454",backgroundColor:null,tickColor:"rgba(0,0,0,0.15)",labelMargin:5,borderWidth:2,borderColor:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:false,hoverable:false,autoHighlight:true,mouseActiveRadius:10},hooks:{}},ma=null,oa=null,ja=null,q=null,W=null,B={xaxis:{},yaxis:{},x2axis:{},y2axis:{}},G={left:0,right:0,top:0,bottom:0},Z=0,ea=0,aa=0,ba=0,da={processOptions:[],processRawData:[],processDatapoints:[],draw:[],bindEvents:[],drawOverlay:[]},T=this;T.setData=
H;T.setupGrid=U;T.draw=la;T.getPlaceholder=function(){return o};T.getCanvas=function(){return ma};T.getPlotOffset=function(){return G};T.width=function(){return aa};T.height=function(){return ba};T.offset=function(){var a=ja.offset();a.left+=G.left;a.top+=G.top;return a};T.getData=function(){return P};T.getAxes=function(){return B};T.getOptions=function(){return u};T.highlight=ua;T.unhighlight=ta;T.triggerRedrawOverlay=na;T.pointOffset=function(a){return{left:parseInt(j(a,"xaxis").p2c(+a.x)+G.left),
top:parseInt(j(a,"yaxis").p2c(+a.y)+G.top)}};T.hooks=da;D(T);s(v);O();H(Q);U();la();R();var fa=[],qa=null}function z(o,Q){return Q*Math.floor(o/Q)}f.plot=function(o,Q,v){return o=new F(f(o),Q,v,f.plot.plugins)};f.plot.plugins=[];f.plot.formatDate=function(o,Q,v){var E=function(A){A=""+A;return A.length==1?"0"+A:A},K=[],D=false,s=o.getUTCHours(),H=s<12;if(v==null)v=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];if(Q.search(/%p|%P/)!=-1)if(s>12)s-=12;else if(s==0)s=12;for(var L=
0;L<Q.length;++L){var j=Q.charAt(L);if(D){switch(j){case "h":j=""+s;break;case "H":j=E(s);break;case "M":j=E(o.getUTCMinutes());break;case "S":j=E(o.getUTCSeconds());break;case "d":j=""+o.getUTCDate();break;case "m":j=""+(o.getUTCMonth()+1);break;case "y":j=""+o.getUTCFullYear();break;case "b":j=""+v[o.getUTCMonth()];break;case "p":j=H?"am":"pm";break;case "P":j=H?"AM":"PM";break}K.push(j);D=false}else if(j=="%")D=true;else K.push(j)}return K.join("")}})(jQuery);
(function(f){function F(s){var H=this,L,j=s.data||{};if(j.elem){H=s.dragTarget=j.elem;s.dragProxy=D.proxy||H;s.cursorOffsetX=j.pageX-j.left;s.cursorOffsetY=j.pageY-j.top;s.offsetX=s.pageX-s.cursorOffsetX;s.offsetY=s.pageY-s.cursorOffsetY}else if(D.dragging||j.which>0&&s.which!=j.which||f(s.target).is(j.not))return;switch(s.type){case "mousedown":f.extend(j,f(H).offset(),{elem:H,target:s.target,pageX:s.pageX,pageY:s.pageY});E.add(document,"mousemove mouseup",F,j);v(H,false);D.dragging=null;return false;
case !D.dragging&&"mousemove":if(o(s.pageX-j.pageX)+o(s.pageY-j.pageY)<j.distance)break;s.target=j.target;L=z(s,"dragstart",H);if(L!==false){D.dragging=H;D.proxy=s.dragProxy=f(L||H)[0]}case "mousemove":if(D.dragging){L=z(s,"drag",H);if(K.drop){K.drop.allowed=L!==false;K.drop.handler(s)}if(L!==false)break;s.type="mouseup"}case "mouseup":E.remove(document,"mousemove mouseup",F);if(D.dragging){K.drop&&K.drop.handler(s);z(s,"dragend",H)}v(H,true);D.dragging=D.proxy=j.elem=false;break}return true}function z(s,
H,L){s.type=H;H=f.event.handle.call(L,s);return H===false?false:H||s.result}function o(s){return Math.pow(s,2)}function Q(){return D.dragging===false}function v(s,H){if(s){s.unselectable=H?"off":"on";s.onselectstart=function(){return H};if(s.style)s.style.MozUserSelect=H?"":"none"}}f.fn.drag=function(s,H,L){H&&this.bind("dragstart",s);L&&this.bind("dragend",L);return!s?this.trigger("drag"):this.bind("drag",H?H:s)};var E=f.event,K=E.special,D=K.drag={not:":input",distance:0,which:1,dragging:false,
setup:function(s){s=f.extend({distance:D.distance,which:D.which,not:D.not},s||{});s.distance=o(s.distance);E.add(this,"mousedown",F,s);this.attachEvent&&this.attachEvent("ondragstart",Q)},teardown:function(){E.remove(this,"mousedown",F);if(this===D.dragging)D.dragging=D.proxy=false;v(this,true);this.detachEvent&&this.detachEvent("ondragstart",Q)}};K.dragstart=K.dragend={setup:function(){},teardown:function(){}}})(jQuery);
(function(f){function F(o){var Q=[].slice.call(arguments,1),v=0;o=f.event.fix(o||window.event);o.type="mousewheel";if(o.wheelDelta)v=o.wheelDelta/120;if(o.detail)v=-o.detail/3;Q.unshift(o,v);return f.event.handle.apply(this,Q)}var z=["DOMMouseScroll","mousewheel"];f.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var o=z.length;o;)this.addEventListener(z[--o],F,false);else this.onmousewheel=F},teardown:function(){if(this.removeEventListener)for(var o=z.length;o;)this.removeEventListener(z[--o],
F,false);else this.onmousewheel=null}};f.fn.extend({mousewheel:function(o){return o?this.bind("mousewheel",o):this.trigger("mousewheel")},unmousewheel:function(o){return this.unbind("mousewheel",o)}})})(jQuery);
(function(f){function F(o){function Q(v,E){var K=v.getOptions();if(K.zoom.interactive){function D(j,A){var J=v.offset();J.left=j.pageX-J.left;J.top=j.pageY-J.top;A?v.zoomOut({center:J}):v.zoom({center:J})}E[K.zoom.trigger](D);E.mousewheel(function(j,A){D(j,A<0);return false})}if(K.pan.interactive){var s="default",H=0,L=0;E.bind("dragstart",{distance:10},function(j){if(j.which!=1)return false;eventHolderCursor=E.css("cursor");E.css("cursor","move");H=j.pageX;L=j.pageY});E.bind("drag",function(){});
E.bind("dragend",function(j){E.css("cursor",s);v.pan({left:H-j.pageX,top:L-j.pageY})})}}o.zoomOut=function(v){v||(v={});if(!v.amount)v.amount=o.getOptions().zoom.amount;v.amount=1/v.amount;o.zoom(v)};o.zoom=function(v){function E(R,U,X){var V=K[X];X=D[X];if(V.used){R=V.c2p(R);U=V.c2p(U);if(U<R){V=R;R=U;U=V}V=U-R;var ca=X.zoomRange;if(!(ca&&(ca[0]!=null&&V<ca[0]||ca[1]!=null&&V>ca[1]))){X.min=R;X.max=U}}}v||(v={});var K=o.getAxes(),D=o.getOptions(),s=v.center,H=v.amount?v.amount:D.zoom.amount,L=o.width(),
j=o.height();s||(s={left:L/2,top:j/2});var A=s.left/L,J=s.left-A*L/H;L=s.left+(1-A)*L/H;var O=s.top/j;A=s.top-O*j/H;s=s.top+(1-O)*j/H;E(J,L,"xaxis");E(J,L,"x2axis");E(A,s,"yaxis");E(A,s,"y2axis");o.setupGrid();o.draw();v.preventEvent||o.getPlaceholder().trigger("plotzoom",[o])};o.pan=function(v){function E(L,j){var A=s[j];j=H[j];var J;if(A.used){J=A.c2p(A.p2c(A.min)+L);A=A.c2p(A.p2c(A.max)+L);var O=j.panRange;if(O){if(O[0]!=null&&O[0]>J){L=O[0]-J;J+=L;A+=L}if(O[1]!=null&&O[1]<A){L=O[1]-A;J+=L;A+=
L}}j.min=J;j.max=A}}var K=+v.left,D=+v.top,s=o.getAxes(),H=o.getOptions();if(isNaN(K))K=0;if(isNaN(D))D=0;E(K,"xaxis");E(K,"x2axis");E(D,"yaxis");E(D,"y2axis");o.setupGrid();o.draw();v.preventEvent||o.getPlaceholder().trigger("plotpan",[o])};o.hooks.bindEvents.push(Q)}var z={xaxis:{zoomRange:null,panRange:null},zoom:{interactive:false,trigger:"dblclick",amount:1.5},pan:{interactive:false}};f.plot.plugins.push({init:F,options:z,name:"navigate",version:"1.1"})})(jQuery);
$(document).ready(function(){function f(){$("#activity").length==0&&$('<div id="activity"></div>').appendTo(U);$("#activity").fadeTo(100,0.8)}function F(){$("#activity").fadeTo(100,0)}function z(){function M(S){return{data:R.plot_pairs[S],color:la[N++],attribute_name:S}}var N=0;f();X={};$(".metric_toggler input").each(function(){X[this.id]=M(this.id)});X.barometer.yaxis=2;return X}function o(M,N,S){$("#tooltip").length==0&&$('<div id="tooltip"></div>').appendTo("body");$("#tooltip").stop().html(S).css({top:N+
5,left:M+5,opacity:0.8}).fadeIn(200)}function Q(){return(O.getAxes().xaxis.max-O.getAxes().xaxis.min)/5}function v(M){var N=O.getAxes().xaxis.min,S=N+Q();return N<M.x&&M.x<S}function E(M){var N=O.getAxes().xaxis.max,S=N-Q();return S<M.x&&M.x<N}function K(){$("#left_arrow").length==0&&$('<div id="left_arrow"></div>').css("opacity","0").appendTo(U);$("#left_arrow").stop().fadeTo(50,0.8)}function D(){$("#right_arrow").length==0&&$('<div id="right_arrow"></div>').css("opacity","0").appendTo(U);$("#right_arrow").stop().fadeTo(50,
0.8)}function s(){$("#left_arrow").stop().fadeTo(50,0)}function H(){$("#right_arrow").stop().fadeTo(50,0)}function L(M){$.extend(R.times,M.times);for(name in R.plot_pairs)if(M.earliest_point<R.earliest_point)R.plot_pairs[name]=M.plot_pairs[name].concat(R.plot_pairs[name]);R.earliest_point=Math.min(R.earliest_point,M.earliest_point);z()}function j(M){var N=29.9213,S=function(Y){var ia=[[N,"1 atm"]],ga=Math.ceil(Y.min*5)/5;do{ia.push([ga,Math.round(ga*5)/5+" "+Base.I18n.barometer.unit]);ga+=0.2}while(ga<
Y.max);return ia};O=$.plot(U,M,{xaxis:{mode:"time",min:V,max:ca},yaxis:{min:0,max:Base.ranges.max},y2axis:{min:Base.ranges.barometer.min,max:Base.ranges.barometer.max,ticks:S},legend:{position:"nw",margin:[10,5]},grid:{markings:[{y2axis:{from:N,to:N}}],hoverable:true,clickable:true},series:{lines:{show:true}}});F()}function A(){f();j($(".metric_toggler input:checked").map(function(){return X[this.id]}))}function J(){z();A()}$("a[rel=facebox]").facebox();var O=null,R=null,U=$("#weather"),X=null,V=
null,ca=null,la=["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],ka=null;U.bind("plothover",function(M,N,S){if(S){if(ka!=S.datapoint){ka=S.datapoint;$("#tooltip").stop().hide();M=S.datapoint[0];var Y=S.datapoint[1].toFixed(2);N=S.series.attribute_name;Y=Y+Base.I18n[N].unit;if(/hi_speed|wind_speed/.test(N)){var ia=R.times[M],ga=/hi_speed/.test(N)?"hi_dir":"wind_dir";ia=ia[ga];Y+=" "+ia}Y='<h3><span class="attribute">'+Base.I18n[N].title+':</span> <span class="value">'+Y+'</span></h3><p class="time">'+
new Date(M)+"</p>";o(S.pageX,S.pageY,Y)}}else{$("#tooltip").stop().fadeOut(200);ka=null;if(v(N)){K();H()}else{E(N)?D():H();s()}}});U.bind("plotclick",function(M,N,S){if(!S){M=144E5;if(v(N)){N=O.getAxes().xaxis.min;V=N=N-M;ca=O.getAxes().xaxis.max-M;if(N<R.earliest_point){M=+new Date(V-V%(M*3));N=+new Date(R.earliest_point-1E3);M="/observations/range/"+M+"/"+N+".json";f();$.getJSON(M,function(Y){L(Y);A()})}else A()}else if(E(N)){N=O.getAxes().xaxis.max;N=N+M;if(!(N>R.latest_point)){V=O.getAxes().xaxis.min+
M;ca=N;A()}}}});$(".metric_toggler input").change(function(){A()}).each(function(M){$(this).parents(".metric_toggler").css("background-color",la[M])});$(".metric_toggler.default_on input").attr("checked","checked");f();$.getJSON(Base.five_min_path,function(M){R=M;J()})});